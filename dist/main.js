/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={91:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),e.hash&&(t+=e.hash),e.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(t)?'"'.concat(t,'"'):t):t}},755:function(t,e){var i;!function(e,i){"use strict";"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!=typeof window?window:this,(function(n,r){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,c=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},l=o.push,h=o.indexOf,d={},u=d.toString,f=d.hasOwnProperty,p=f.toString,_=p.call(Object),v={},g=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},y=function(t){return null!=t&&t===t.window},m=n.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,i){var n,r,o=(i=i||m).createElement("script");if(o.text=t,e)for(n in x)(r=e[n]||e.getAttribute&&e.getAttribute(n))&&o.setAttribute(n,r);i.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[u.call(t)]||"object":typeof t}var k="3.7.0",C=/HTML$/i,E=function(t,e){return new E.fn.init(t,e)};function T(t){var e=!!t&&"length"in t&&t.length,i=w(t);return!g(t)&&!y(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function M(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}E.fn=E.prototype={jquery:k,constructor:E,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},E.extend=E.fn.extend=function(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||g(s)||(s={}),a===c&&(s=this,a--);a<c;a++)if(null!=(t=arguments[a]))for(e in t)n=t[e],"__proto__"!==e&&s!==n&&(l&&n&&(E.isPlainObject(n)||(r=Array.isArray(n)))?(i=s[e],o=r&&!Array.isArray(i)?[]:r||E.isPlainObject(i)?i:{},r=!1,s[e]=E.extend(l,o,n)):void 0!==n&&(s[e]=n));return s},E.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==u.call(t)||(e=s(t))&&("function"!=typeof(i=f.call(e,"constructor")&&e.constructor)||p.call(i)!==_))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){b(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,n=0;if(T(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},text:function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r)return t.textContent;if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=E.text(e);return i},makeArray:function(t,e){var i=e||[];return null!=t&&(T(Object(t))?E.merge(i,"string"==typeof t?[t]:t):l.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:h.call(e,t,i)},isXMLDoc:function(t){var e=t&&t.namespaceURI,i=t&&(t.ownerDocument||t).documentElement;return!C.test(e||i&&i.nodeName||"HTML")},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,o=t.length,s=!i;r<o;r++)!e(t[r],r)!==s&&n.push(t[r]);return n},map:function(t,e,i){var n,r,o=0,s=[];if(T(t))for(n=t.length;o<n;o++)null!=(r=e(t[o],o,i))&&s.push(r);else for(o in t)null!=(r=e(t[o],o,i))&&s.push(r);return c(s)},guid:1,support:v}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=o[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){d["[object "+e+"]"]=e.toLowerCase()}));var A=o.pop,S=o.sort,L=o.splice,N="[\\x20\\t\\r\\n\\f]",j=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g");E.contains=function(t,e){var i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(t.contains?t.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))};var z=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function D(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}E.escapeSelector=function(t){return(t+"").replace(z,D)};var P=m,B=l;!function(){var t,e,i,r,s,c,l,d,u,p,_=B,g=E.expando,y=0,m=0,x=tt(),b=tt(),w=tt(),k=tt(),C=function(t,e){return t===e&&(s=!0),0},T="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",D="\\["+N+"*("+z+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+N+"*\\]",R=":("+z+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+D+")*)|.*)\\)|)",F=new RegExp(N+"+","g"),I=new RegExp("^"+N+"*,"+N+"*"),q=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),O=new RegExp(N+"|>"),K=new RegExp(R),U=new RegExp("^"+z+"$"),H={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),TAG:new RegExp("^("+z+"|[*])"),ATTR:new RegExp("^"+D),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+T+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,X=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),V=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},Q=function(){ct()},J=ut((function(t){return!0===t.disabled&&M(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{_.apply(o=a.call(P.childNodes),P.childNodes),o[P.childNodes.length].nodeType}catch(t){_={apply:function(t,e){B.apply(t,a.call(e))},call:function(t){B.apply(t,a.call(arguments,1))}}}function Z(t,e,i,n){var r,o,s,a,l,h,f,p=e&&e.ownerDocument,y=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==y&&9!==y&&11!==y)return i;if(!n&&(ct(e),e=e||c,d)){if(11!==y&&(l=$.exec(t)))if(r=l[1]){if(9===y){if(!(s=e.getElementById(r)))return i;if(s.id===r)return _.call(i,s),i}else if(p&&(s=p.getElementById(r))&&Z.contains(e,s)&&s.id===r)return _.call(i,s),i}else{if(l[2])return _.apply(i,e.getElementsByTagName(t)),i;if((r=l[3])&&e.getElementsByClassName)return _.apply(i,e.getElementsByClassName(r)),i}if(!(k[t+" "]||u&&u.test(t))){if(f=t,p=e,1===y&&(O.test(t)||q.test(t))){for((p=Y.test(t)&&at(e.parentNode)||e)==e&&v.scope||((a=e.getAttribute("id"))?a=E.escapeSelector(a):e.setAttribute("id",a=g)),o=(h=ht(t)).length;o--;)h[o]=(a?"#"+a:":scope")+" "+dt(h[o]);f=h.join(",")}try{return _.apply(i,p.querySelectorAll(f)),i}catch(e){k(t,!0)}finally{a===g&&e.removeAttribute("id")}}}return yt(t.replace(j,"$1"),e,i,n)}function tt(){var t=[];return function i(n,r){return t.push(n+" ")>e.cacheLength&&delete i[t.shift()],i[n+" "]=r}}function et(t){return t[g]=!0,t}function it(t){var e=c.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function nt(t){return function(e){return M(e,"input")&&e.type===t}}function rt(t){return function(e){return(M(e,"input")||M(e,"button"))&&e.type===t}}function ot(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&J(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function st(t){return et((function(e){return e=+e,et((function(i,n){for(var r,o=t([],i.length,e),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))}))}))}function at(t){return t&&void 0!==t.getElementsByTagName&&t}function ct(t){var i,n=t?t.ownerDocument||t:P;return n!=c&&9===n.nodeType&&n.documentElement?(l=(c=n).documentElement,d=!E.isXMLDoc(c),p=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,P!=c&&(i=c.defaultView)&&i.top!==i&&i.addEventListener("unload",Q),v.getById=it((function(t){return l.appendChild(t).id=E.expando,!c.getElementsByName||!c.getElementsByName(E.expando).length})),v.disconnectedMatch=it((function(t){return p.call(t,"*")})),v.scope=it((function(){return c.querySelectorAll(":scope")})),v.cssHas=it((function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),v.getById?(e.filter.ID=function(t){var e=t.replace(X,V);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&d){var i=e.getElementById(t);return i?[i]:[]}}):(e.filter.ID=function(t){var e=t.replace(X,V);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&d){var i,n,r,o=e.getElementById(t);if(o){if((i=o.getAttributeNode("id"))&&i.value===t)return[o];for(r=e.getElementsByName(t),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===t)return[o]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&d)return e.getElementsByClassName(t)},u=[],it((function(t){var e;l.appendChild(t).innerHTML="<a id='"+g+"' href='' disabled='disabled'></a><select id='"+g+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||u.push("\\["+N+"*(?:value|"+T+")"),t.querySelectorAll("[id~="+g+"-]").length||u.push("~="),t.querySelectorAll("a#"+g+"+*").length||u.push(".#.+[+~]"),t.querySelectorAll(":checked").length||u.push(":checked"),(e=c.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),l.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&u.push(":enabled",":disabled"),(e=c.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||u.push("\\["+N+"*name"+N+"*="+N+"*(?:''|\"\")")})),v.cssHas||u.push(":has"),u=u.length&&new RegExp(u.join("|")),C=function(t,e){if(t===e)return s=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!v.sortDetached&&e.compareDocumentPosition(t)===i?t===c||t.ownerDocument==P&&Z.contains(P,t)?-1:e===c||e.ownerDocument==P&&Z.contains(P,e)?1:r?h.call(r,t)-h.call(r,e):0:4&i?-1:1)},c):c}for(t in Z.matches=function(t,e){return Z(t,null,null,e)},Z.matchesSelector=function(t,e){if(ct(t),d&&!k[e+" "]&&(!u||!u.test(e)))try{var i=p.call(t,e);if(i||v.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){k(e,!0)}return Z(e,c,null,[t]).length>0},Z.contains=function(t,e){return(t.ownerDocument||t)!=c&&ct(t),E.contains(t,e)},Z.attr=function(t,i){(t.ownerDocument||t)!=c&&ct(t);var n=e.attrHandle[i.toLowerCase()],r=n&&f.call(e.attrHandle,i.toLowerCase())?n(t,i,!d):void 0;return void 0!==r?r:t.getAttribute(i)},Z.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},E.uniqueSort=function(t){var e,i=[],n=0,o=0;if(s=!v.sortStable,r=!v.sortStable&&a.call(t,0),S.call(t,C),s){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)L.call(t,i[n],1)}return r=null,t},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(a.apply(this)))},e=E.expr={cacheLength:50,createPseudo:et,match:H,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(X,V),t[3]=(t[3]||t[4]||t[5]||"").replace(X,V),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Z.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Z.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return H.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&K.test(i)&&(e=ht(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(X,V).toLowerCase();return"*"===t?function(){return!0}:function(t){return M(t,e)}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+N+")"+t+"("+N+"|$)"))&&x(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var r=Z.attr(n,t);return null==r?"!="===e:!e||(r+="","="===e?r===i:"!="===e?r!==i:"^="===e?i&&0===r.indexOf(i):"*="===e?i&&r.indexOf(i)>-1:"$="===e?i&&r.slice(-i.length)===i:"~="===e?(" "+r.replace(F," ")+" ").indexOf(i)>-1:"|="===e&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,c){var l,h,d,u,f,p=o!==s?"nextSibling":"previousSibling",_=e.parentNode,v=a&&e.nodeName.toLowerCase(),m=!c&&!a,x=!1;if(_){if(o){for(;p;){for(d=e;d=d[p];)if(a?M(d,v):1===d.nodeType)return!1;f=p="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?_.firstChild:_.lastChild],s&&m){for(x=(u=(l=(h=_[g]||(_[g]={}))[t]||[])[0]===y&&l[1])&&l[2],d=u&&_.childNodes[u];d=++u&&d&&d[p]||(x=u=0)||f.pop();)if(1===d.nodeType&&++x&&d===e){h[t]=[y,u,x];break}}else if(m&&(x=u=(l=(h=e[g]||(e[g]={}))[t]||[])[0]===y&&l[1]),!1===x)for(;(d=++u&&d&&d[p]||(x=u=0)||f.pop())&&(!(a?M(d,v):1===d.nodeType)||!++x||(m&&((h=d[g]||(d[g]={}))[t]=[y,x]),d!==e)););return(x-=r)===n||x%n==0&&x/n>=0}}},PSEUDO:function(t,i){var n,r=e.pseudos[t]||e.setFilters[t.toLowerCase()]||Z.error("unsupported pseudo: "+t);return r[g]?r(i):r.length>1?(n=[t,t,"",i],e.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,e){for(var n,o=r(t,i),s=o.length;s--;)t[n=h.call(t,o[s])]=!(e[n]=o[s])})):function(t){return r(t,0,n)}):r}},pseudos:{not:et((function(t){var e=[],i=[],n=gt(t.replace(j,"$1"));return n[g]?et((function(t,e,i,r){for(var o,s=n(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))})):function(t,r,o){return e[0]=t,n(e,null,o,i),e[0]=null,!i.pop()}})),has:et((function(t){return function(e){return Z(t,e).length>0}})),contains:et((function(t){return t=t.replace(X,V),function(e){return(e.textContent||E.text(e)).indexOf(t)>-1}})),lang:et((function(t){return U.test(t||"")||Z.error("unsupported lang: "+t),t=t.replace(X,V).toLowerCase(),function(e){var i;do{if(i=d?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===l},focus:function(t){return t===function(){try{return c.activeElement}catch(t){}}()&&c.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ot(!1),disabled:ot(!0),checked:function(t){return M(t,"input")&&!!t.checked||M(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return G.test(t.nodeName)},input:function(t){return W.test(t.nodeName)},button:function(t){return M(t,"input")&&"button"===t.type||M(t,"button")},text:function(t){var e;return M(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:st((function(){return[0]})),last:st((function(t,e){return[e-1]})),eq:st((function(t,e,i){return[i<0?i+e:i]})),even:st((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:st((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:st((function(t,e,i){var n;for(n=i<0?i+e:i>e?e:i;--n>=0;)t.push(n);return t})),gt:st((function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t}))}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=nt(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=rt(t);function lt(){}function ht(t,i){var n,r,o,s,a,c,l,h=b[t+" "];if(h)return i?0:h.slice(0);for(a=t,c=[],l=e.preFilter;a;){for(s in n&&!(r=I.exec(a))||(r&&(a=a.slice(r[0].length)||a),c.push(o=[])),n=!1,(r=q.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(j," ")}),a=a.slice(n.length)),e.filter)!(r=H[s].exec(a))||l[s]&&!(r=l[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?Z.error(t):b(t,c).slice(0)}function dt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function ut(t,e,i){var n=e.dir,r=e.next,o=r||n,s=i&&"parentNode"===o,a=m++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,r);return!1}:function(e,i,c){var l,h,d=[y,a];if(c){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,c))return!0}else for(;e=e[n];)if(1===e.nodeType||s)if(h=e[g]||(e[g]={}),r&&M(e,r))e=e[n]||e;else{if((l=h[o])&&l[0]===y&&l[1]===a)return d[2]=l[2];if(h[o]=d,d[2]=t(e,i,c))return!0}return!1}}function ft(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function pt(t,e,i,n,r){for(var o,s=[],a=0,c=t.length,l=null!=e;a<c;a++)(o=t[a])&&(i&&!i(o,n,r)||(s.push(o),l&&e.push(a)));return s}function _t(t,e,i,n,r,o){return n&&!n[g]&&(n=_t(n)),r&&!r[g]&&(r=_t(r,o)),et((function(o,s,a,c){var l,d,u,f,p=[],v=[],g=s.length,y=o||function(t,e,i){for(var n=0,r=e.length;n<r;n++)Z(t,e[n],i);return i}(e||"*",a.nodeType?[a]:a,[]),m=!t||!o&&e?y:pt(y,p,t,a,c);if(i?i(m,f=r||(o?t:g||n)?[]:s,a,c):f=m,n)for(l=pt(f,v),n(l,[],a,c),d=l.length;d--;)(u=l[d])&&(f[v[d]]=!(m[v[d]]=u));if(o){if(r||t){if(r){for(l=[],d=f.length;d--;)(u=f[d])&&l.push(m[d]=u);r(null,f=[],l,c)}for(d=f.length;d--;)(u=f[d])&&(l=r?h.call(o,u):p[d])>-1&&(o[l]=!(s[l]=u))}}else f=pt(f===s?f.splice(g,f.length):f),r?r(null,s,f,c):_.apply(s,f)}))}function vt(t){for(var n,r,o,s=t.length,a=e.relative[t[0].type],c=a||e.relative[" "],l=a?1:0,d=ut((function(t){return t===n}),c,!0),u=ut((function(t){return h.call(n,t)>-1}),c,!0),f=[function(t,e,r){var o=!a&&(r||e!=i)||((n=e).nodeType?d(t,e,r):u(t,e,r));return n=null,o}];l<s;l++)if(r=e.relative[t[l].type])f=[ut(ft(f),r)];else{if((r=e.filter[t[l].type].apply(null,t[l].matches))[g]){for(o=++l;o<s&&!e.relative[t[o].type];o++);return _t(l>1&&ft(f),l>1&&dt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(j,"$1"),r,l<o&&vt(t.slice(l,o)),o<s&&vt(t=t.slice(o)),o<s&&dt(t))}f.push(r)}return ft(f)}function gt(t,n){var r,o=[],s=[],a=w[t+" "];if(!a){for(n||(n=ht(t)),r=n.length;r--;)(a=vt(n[r]))[g]?o.push(a):s.push(a);a=w(t,function(t,n){var r=n.length>0,o=t.length>0,s=function(s,a,l,h,u){var f,p,v,g=0,m="0",x=s&&[],b=[],w=i,k=s||o&&e.find.TAG("*",u),C=y+=null==w?1:Math.random()||.1,T=k.length;for(u&&(i=a==c||a||u);m!==T&&null!=(f=k[m]);m++){if(o&&f){for(p=0,a||f.ownerDocument==c||(ct(f),l=!d);v=t[p++];)if(v(f,a||c,l)){_.call(h,f);break}u&&(y=C)}r&&((f=!v&&f)&&g--,s&&x.push(f))}if(g+=m,r&&m!==g){for(p=0;v=n[p++];)v(x,b,a,l);if(s){if(g>0)for(;m--;)x[m]||b[m]||(b[m]=A.call(h));b=pt(b)}_.apply(h,b),u&&!s&&b.length>0&&g+n.length>1&&E.uniqueSort(h)}return u&&(y=C,i=w),x};return r?et(s):s}(s,o)),a.selector=t}return a}function yt(t,i,n,r){var o,s,a,c,l,h="function"==typeof t&&t,u=!r&&ht(t=h.selector||t);if(n=n||[],1===u.length){if((s=u[0]=u[0].slice(0)).length>2&&"ID"===(a=s[0]).type&&9===i.nodeType&&d&&e.relative[s[1].type]){if(!(i=(e.find.ID(a.matches[0].replace(X,V),i)||[])[0]))return n;h&&(i=i.parentNode),t=t.slice(s.shift().value.length)}for(o=H.needsContext.test(t)?0:s.length;o--&&(a=s[o],!e.relative[c=a.type]);)if((l=e.find[c])&&(r=l(a.matches[0].replace(X,V),Y.test(s[0].type)&&at(i.parentNode)||i))){if(s.splice(o,1),!(t=r.length&&dt(s)))return _.apply(n,r),n;break}}return(h||gt(t,u))(r,i,!d,n,!i||Y.test(t)&&at(i.parentNode)||i),n}lt.prototype=e.filters=e.pseudos,e.setFilters=new lt,v.sortStable=g.split("").sort(C).join("")===g,ct(),v.sortDetached=it((function(t){return 1&t.compareDocumentPosition(c.createElement("fieldset"))})),E.find=Z,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,Z.compile=gt,Z.select=yt,Z.setDocument=ct,Z.escape=E.escapeSelector,Z.getText=E.text,Z.isXML=E.isXMLDoc,Z.selectors=E.expr,Z.support=E.support,Z.uniqueSort=E.uniqueSort}();var R=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&E(t).is(i))break;n.push(t)}return n},F=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},I=E.expr.match.needsContext,q=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(t,e,i){return g(e)?E.grep(t,(function(t,n){return!!e.call(t,n,t)!==i})):e.nodeType?E.grep(t,(function(t){return t===e!==i})):"string"!=typeof e?E.grep(t,(function(t){return h.call(e,t)>-1!==i})):E.filter(e,t,i)}E.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?E.find.matchesSelector(n,t)?[n]:[]:E.find.matches(t,E.grep(e,(function(t){return 1===t.nodeType})))},E.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(E(t).filter((function(){for(e=0;e<n;e++)if(E.contains(r[e],this))return!0})));for(i=this.pushStack([]),e=0;e<n;e++)E.find(t,r[e],i);return n>1?E.uniqueSort(i):i},filter:function(t){return this.pushStack(O(this,t||[],!1))},not:function(t){return this.pushStack(O(this,t||[],!0))},is:function(t){return!!O(this,"string"==typeof t&&I.test(t)?E(t):t||[],!1).length}});var K,U=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||K,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:U.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:m,!0)),q.test(n[1])&&E.isPlainObject(e))for(n in e)g(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(r=m.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):g(t)?void 0!==i.ready?i.ready(t):t(E):E.makeArray(t,this)}).prototype=E.fn,K=E(m);var H=/^(?:parents|prev(?:Until|All))/,W={children:!0,contents:!0,next:!0,prev:!0};function G(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(E.contains(this,e[t]))return!0}))},closest:function(t,e){var i,n=0,r=this.length,o=[],s="string"!=typeof t&&E(t);if(!I.test(t))for(;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&E.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?E.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?h.call(E(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return R(t,"parentNode")},parentsUntil:function(t,e,i){return R(t,"parentNode",i)},next:function(t){return G(t,"nextSibling")},prev:function(t){return G(t,"previousSibling")},nextAll:function(t){return R(t,"nextSibling")},prevAll:function(t){return R(t,"previousSibling")},nextUntil:function(t,e,i){return R(t,"nextSibling",i)},prevUntil:function(t,e,i){return R(t,"previousSibling",i)},siblings:function(t){return F((t.parentNode||{}).firstChild,t)},children:function(t){return F(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(M(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},(function(t,e){E.fn[t]=function(i,n){var r=E.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=E.filter(n,r)),this.length>1&&(W[t]||E.uniqueSort(r),H.test(t)&&r.reverse()),this.pushStack(r)}}));var $=/[^\x20\t\r\n\f]+/g;function Y(t){return t}function X(t){throw t}function V(t,e,i,n){var r;try{t&&g(r=t.promise)?r.call(t).done(e).fail(i):t&&g(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}E.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return E.each(t.match($)||[],(function(t,i){e[i]=!0})),e}(t):E.extend({},t);var e,i,n,r,o=[],s=[],a=-1,c=function(){for(r=r||t.once,n=e=!0;s.length;a=-1)for(i=s.shift();++a<o.length;)!1===o[a].apply(i[0],i[1])&&t.stopOnFalse&&(a=o.length,i=!1);t.memory||(i=!1),e=!1,r&&(o=i?[]:"")},l={add:function(){return o&&(i&&!e&&(a=o.length-1,s.push(i)),function e(i){E.each(i,(function(i,n){g(n)?t.unique&&l.has(n)||o.push(n):n&&n.length&&"string"!==w(n)&&e(n)}))}(arguments),i&&!e&&c()),this},remove:function(){return E.each(arguments,(function(t,e){for(var i;(i=E.inArray(e,o,i))>-1;)o.splice(i,1),i<=a&&a--})),this},has:function(t){return t?E.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=s=[],o=i="",this},disabled:function(){return!o},lock:function(){return r=s=[],i||e||(o=i=""),this},locked:function(){return!!r},fireWith:function(t,i){return r||(i=[t,(i=i||[]).slice?i.slice():i],s.push(i),e||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return E.Deferred((function(i){E.each(e,(function(e,n){var r=g(t[n[4]])&&t[n[4]];o[n[1]]((function(){var t=r&&r.apply(this,arguments);t&&g(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,i,r){var o=0;function s(t,e,i,r){return function(){var a=this,c=arguments,l=function(){var n,l;if(!(t<o)){if((n=i.apply(a,c))===e.promise())throw new TypeError("Thenable self-resolution");l=n&&("object"==typeof n||"function"==typeof n)&&n.then,g(l)?r?l.call(n,s(o,e,Y,r),s(o,e,X,r)):(o++,l.call(n,s(o,e,Y,r),s(o,e,X,r),s(o,e,Y,e.notifyWith))):(i!==Y&&(a=void 0,c=[n]),(r||e.resolveWith)(a,c))}},h=r?l:function(){try{l()}catch(n){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(n,h.error),t+1>=o&&(i!==X&&(a=void 0,c=[n]),e.rejectWith(a,c))}};t?h():(E.Deferred.getErrorHook?h.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(h.error=E.Deferred.getStackHook()),n.setTimeout(h))}}return E.Deferred((function(n){e[0][3].add(s(0,n,g(r)?r:Y,n.notifyWith)),e[1][3].add(s(0,n,g(t)?t:Y)),e[2][3].add(s(0,n,g(i)?i:X))})).promise()},promise:function(t){return null!=t?E.extend(t,r):r}},o={};return E.each(e,(function(t,n){var s=n[2],a=n[5];r[n[1]]=s.add,a&&s.add((function(){i=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=s.fireWith})),r.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,i=e,n=Array(i),r=a.call(arguments),o=E.Deferred(),s=function(t){return function(i){n[t]=this,r[t]=arguments.length>1?a.call(arguments):i,--e||o.resolveWith(n,r)}};if(e<=1&&(V(t,o.done(s(i)).resolve,o.reject,!e),"pending"===o.state()||g(r[i]&&r[i].then)))return o.then();for(;i--;)V(r[i],s(i),o.reject);return o.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&Q.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){n.setTimeout((function(){throw t}))};var J=E.Deferred();function Z(){m.removeEventListener("DOMContentLoaded",Z),n.removeEventListener("load",Z),E.ready()}E.fn.ready=function(t){return J.then(t).catch((function(t){E.readyException(t)})),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||J.resolveWith(m,[E]))}}),E.ready.then=J.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?n.setTimeout(E.ready):(m.addEventListener("DOMContentLoaded",Z),n.addEventListener("load",Z));var tt=function(t,e,i,n,r,o,s){var a=0,c=t.length,l=null==i;if("object"===w(i))for(a in r=!0,i)tt(t,e,a,i[a],!0,o,s);else if(void 0!==n&&(r=!0,g(n)||(s=!0),l&&(s?(e.call(t,n),e=null):(l=e,e=function(t,e,i){return l.call(E(t),i)})),e))for(;a<c;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return r?t:l?e.call(t):c?e(t[0],i):o},et=/^-ms-/,it=/-([a-z])/g;function nt(t,e){return e.toUpperCase()}function rt(t){return t.replace(et,"ms-").replace(it,nt)}var ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function st(){this.expando=E.expando+st.uid++}st.uid=1,st.prototype={cache:function(t){var e=t[this.expando];return e||(e={},ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[rt(e)]=i;else for(n in e)r[rt(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][rt(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(rt):(e=rt(e))in n?[e]:e.match($)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||E.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var at=new st,ct=new st,lt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ht=/[A-Z]/g;function dt(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(ht,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:lt.test(t)?JSON.parse(t):t)}(i)}catch(t){}ct.set(t,e,i)}else i=void 0;return i}E.extend({hasData:function(t){return ct.hasData(t)||at.hasData(t)},data:function(t,e,i){return ct.access(t,e,i)},removeData:function(t,e){ct.remove(t,e)},_data:function(t,e,i){return at.access(t,e,i)},_removeData:function(t,e){at.remove(t,e)}}),E.fn.extend({data:function(t,e){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=ct.get(o),1===o.nodeType&&!at.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(n=s[i].name).indexOf("data-")&&(n=rt(n.slice(5)),dt(o,n,r[n]));at.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){ct.set(this,t)})):tt(this,(function(e){var i;if(o&&void 0===e)return void 0!==(i=ct.get(o,t))||void 0!==(i=dt(o,t))?i:void 0;this.each((function(){ct.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){ct.remove(this,t)}))}}),E.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=at.get(t,e),i&&(!n||Array.isArray(i)?n=at.access(t,e,E.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=E.queue(t,e),n=i.length,r=i.shift(),o=E._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,(function(){E.dequeue(t,e)}),o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return at.get(t,i)||at.access(t,i,{empty:E.Callbacks("once memory").add((function(){at.remove(t,[e+"queue",i])}))})}}),E.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?E.queue(this[0],t):void 0===e?this:this.each((function(){var i=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&E.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){E.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=E.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=at.get(o[s],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ft=new RegExp("^(?:([+-])=|)("+ut+")([a-z%]*)$","i"),pt=["Top","Right","Bottom","Left"],_t=m.documentElement,vt=function(t){return E.contains(t.ownerDocument,t)},gt={composed:!0};_t.getRootNode&&(vt=function(t){return E.contains(t.ownerDocument,t)||t.getRootNode(gt)===t.ownerDocument});var yt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&vt(t)&&"none"===E.css(t,"display")};function mt(t,e,i,n){var r,o,s=20,a=n?function(){return n.cur()}:function(){return E.css(t,e,"")},c=a(),l=i&&i[3]||(E.cssNumber[e]?"":"px"),h=t.nodeType&&(E.cssNumber[e]||"px"!==l&&+c)&&ft.exec(E.css(t,e));if(h&&h[3]!==l){for(c/=2,l=l||h[3],h=+c||1;s--;)E.style(t,e,h+l),(1-o)*(1-(o=a()/c||.5))<=0&&(s=0),h/=o;h*=2,E.style(t,e,h+l),i=i||[]}return i&&(h=+h||+c||0,r=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=l,n.start=h,n.end=r)),r}var xt={};function bt(t){var e,i=t.ownerDocument,n=t.nodeName,r=xt[n];return r||(e=i.body.appendChild(i.createElement(n)),r=E.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),xt[n]=r,r)}function wt(t,e){for(var i,n,r=[],o=0,s=t.length;o<s;o++)(n=t[o]).style&&(i=n.style.display,e?("none"===i&&(r[o]=at.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&yt(n)&&(r[o]=bt(n))):"none"!==i&&(r[o]="none",at.set(n,"display",i)));for(o=0;o<s;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}E.fn.extend({show:function(){return wt(this,!0)},hide:function(){return wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){yt(this)?E(this).show():E(this).hide()}))}});var kt,Ct,Et=/^(?:checkbox|radio)$/i,Tt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Mt=/^$|^module$|\/(?:java|ecma)script/i;kt=m.createDocumentFragment().appendChild(m.createElement("div")),(Ct=m.createElement("input")).setAttribute("type","radio"),Ct.setAttribute("checked","checked"),Ct.setAttribute("name","t"),kt.appendChild(Ct),v.checkClone=kt.cloneNode(!0).cloneNode(!0).lastChild.checked,kt.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!kt.cloneNode(!0).lastChild.defaultValue,kt.innerHTML="<option></option>",v.option=!!kt.lastChild;var At={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function St(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&M(t,e)?E.merge([t],i):i}function Lt(t,e){for(var i=0,n=t.length;i<n;i++)at.set(t[i],"globalEval",!e||at.get(e[i],"globalEval"))}At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,v.option||(At.optgroup=At.option=[1,"<select multiple='multiple'>","</select>"]);var Nt=/<|&#?\w+;/;function jt(t,e,i,n,r){for(var o,s,a,c,l,h,d=e.createDocumentFragment(),u=[],f=0,p=t.length;f<p;f++)if((o=t[f])||0===o)if("object"===w(o))E.merge(u,o.nodeType?[o]:o);else if(Nt.test(o)){for(s=s||d.appendChild(e.createElement("div")),a=(Tt.exec(o)||["",""])[1].toLowerCase(),c=At[a]||At._default,s.innerHTML=c[1]+E.htmlPrefilter(o)+c[2],h=c[0];h--;)s=s.lastChild;E.merge(u,s.childNodes),(s=d.firstChild).textContent=""}else u.push(e.createTextNode(o));for(d.textContent="",f=0;o=u[f++];)if(n&&E.inArray(o,n)>-1)r&&r.push(o);else if(l=vt(o),s=St(d.appendChild(o),"script"),l&&Lt(s),i)for(h=0;o=s[h++];)Mt.test(o.type||"")&&i.push(o);return d}var zt=/^([^.]*)(?:\.(.+)|)/;function Dt(){return!0}function Pt(){return!1}function Bt(t,e,i,n,r,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)Bt(t,a,i,n,e[a],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=Pt;else if(!r)return t;return 1===o&&(s=r,r=function(t){return E().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=E.guid++)),t.each((function(){E.event.add(this,e,r,n,i)}))}function Rt(t,e,i){i?(at.set(t,e,!1),E.event.add(t,e,{namespace:!1,handler:function(t){var i,n=at.get(this,e);if(1&t.isTrigger&&this[e]){if(n)(E.event.special[e]||{}).delegateType&&t.stopPropagation();else if(n=a.call(arguments),at.set(this,e,n),this[e](),i=at.get(this,e),at.set(this,e,!1),n!==i)return t.stopImmediatePropagation(),t.preventDefault(),i}else n&&(at.set(this,e,E.event.trigger(n[0],n.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Dt)}})):void 0===at.get(t,e)&&E.event.add(t,e,Dt)}E.event={global:{},add:function(t,e,i,n,r){var o,s,a,c,l,h,d,u,f,p,_,v=at.get(t);if(ot(t))for(i.handler&&(i=(o=i).handler,r=o.selector),r&&E.find.matchesSelector(_t,r),i.guid||(i.guid=E.guid++),(c=v.events)||(c=v.events=Object.create(null)),(s=v.handle)||(s=v.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match($)||[""]).length;l--;)f=_=(a=zt.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),f&&(d=E.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=E.event.special[f]||{},h=E.extend({type:f,origType:_,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:p.join(".")},o),(u=c[f])||((u=c[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,n,p,s)||t.addEventListener&&t.addEventListener(f,s)),d.add&&(d.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),r?u.splice(u.delegateCount++,0,h):u.push(h),E.event.global[f]=!0)},remove:function(t,e,i,n,r){var o,s,a,c,l,h,d,u,f,p,_,v=at.hasData(t)&&at.get(t);if(v&&(c=v.events)){for(l=(e=(e||"").match($)||[""]).length;l--;)if(f=_=(a=zt.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),f){for(d=E.event.special[f]||{},u=c[f=(n?d.delegateType:d.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=u.length;o--;)h=u[o],!r&&_!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(u.splice(o,1),h.selector&&u.delegateCount--,d.remove&&d.remove.call(t,h));s&&!u.length&&(d.teardown&&!1!==d.teardown.call(t,p,v.handle)||E.removeEvent(t,f,v.handle),delete c[f])}else for(f in c)E.event.remove(t,f+e[l],i,n,!0);E.isEmptyObject(c)&&at.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,o,s,a=new Array(arguments.length),c=E.event.fix(t),l=(at.get(this,"events")||Object.create(null))[c.type]||[],h=E.event.special[c.type]||{};for(a[0]=c,e=1;e<arguments.length;e++)a[e]=arguments[e];if(c.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,c)){for(s=E.event.handlers.call(this,c,l),e=0;(r=s[e++])&&!c.isPropagationStopped();)for(c.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==o.namespace&&!c.rnamespace.test(o.namespace)||(c.handleObj=o,c.data=o.data,void 0!==(n=((E.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a))&&!1===(c.result=n)&&(c.preventDefault(),c.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,c),c.result}},handlers:function(t,e){var i,n,r,o,s,a=[],c=e.delegateCount,l=t.target;if(c&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(o=[],s={},i=0;i<c;i++)void 0===s[r=(n=e[i]).selector+" "]&&(s[r]=n.needsContext?E(r,this).index(l)>-1:E.find(r,this,null,[l]).length),s[r]&&o.push(n);o.length&&a.push({elem:l,handlers:o})}return l=this,c<e.length&&a.push({elem:l,handlers:e.slice(c)}),a},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:g(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Et.test(e.type)&&e.click&&M(e,"input")&&Rt(e,"click",!0),!1},trigger:function(t){var e=this||t;return Et.test(e.type)&&e.click&&M(e,"input")&&Rt(e,"click"),!0},_default:function(t){var e=t.target;return Et.test(e.type)&&e.click&&M(e,"input")&&at.get(e,"click")||M(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Dt:Pt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Pt,isPropagationStopped:Pt,isImmediatePropagationStopped:Pt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Dt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Dt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Dt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(t,e){function i(t){if(m.documentMode){var i=at.get(this,"handle"),n=E.event.fix(t);n.type="focusin"===t.type?"focus":"blur",n.isSimulated=!0,i(t),n.target===n.currentTarget&&i(n)}else E.event.simulate(e,t.target,E.event.fix(t))}E.event.special[t]={setup:function(){var n;if(Rt(this,t,!0),!m.documentMode)return!1;(n=at.get(this,e))||this.addEventListener(e,i),at.set(this,e,(n||0)+1)},trigger:function(){return Rt(this,t),!0},teardown:function(){var t;if(!m.documentMode)return!1;(t=at.get(this,e)-1)?at.set(this,e,t):(this.removeEventListener(e,i),at.remove(this,e))},_default:function(e){return at.get(e.target,t)},delegateType:e},E.event.special[e]={setup:function(){var n=this.ownerDocument||this.document||this,r=m.documentMode?this:n,o=at.get(r,e);o||(m.documentMode?this.addEventListener(e,i):n.addEventListener(t,i,!0)),at.set(r,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,r=m.documentMode?this:n,o=at.get(r,e)-1;o?at.set(r,e,o):(m.documentMode?this.removeEventListener(e,i):n.removeEventListener(t,i,!0),at.remove(r,e))}}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=t.relatedTarget,r=t.handleObj;return n&&(n===this||E.contains(this,n))||(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}})),E.fn.extend({on:function(t,e,i,n){return Bt(this,t,e,i,n)},one:function(t,e,i,n){return Bt(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,E(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=Pt),this.each((function(){E.event.remove(this,t,i,e)}))}});var Ft=/<script|<style|<link/i,It=/checked\s*(?:[^=]|=\s*.checked.)/i,qt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ot(t,e){return M(t,"table")&&M(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function Kt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ut(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ht(t,e){var i,n,r,o,s,a;if(1===e.nodeType){if(at.hasData(t)&&(a=at.get(t).events))for(r in at.remove(e,"handle events"),a)for(i=0,n=a[r].length;i<n;i++)E.event.add(e,r,a[r][i]);ct.hasData(t)&&(o=ct.access(t),s=E.extend({},o),ct.set(e,s))}}function Wt(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Et.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Gt(t,e,i,n){e=c(e);var r,o,s,a,l,h,d=0,u=t.length,f=u-1,p=e[0],_=g(p);if(_||u>1&&"string"==typeof p&&!v.checkClone&&It.test(p))return t.each((function(r){var o=t.eq(r);_&&(e[0]=p.call(this,r,o.html())),Gt(o,e,i,n)}));if(u&&(o=(r=jt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===r.childNodes.length&&(r=o),o||n)){for(a=(s=E.map(St(r,"script"),Kt)).length;d<u;d++)l=r,d!==f&&(l=E.clone(l,!0,!0),a&&E.merge(s,St(l,"script"))),i.call(t[d],l,d);if(a)for(h=s[s.length-1].ownerDocument,E.map(s,Ut),d=0;d<a;d++)l=s[d],Mt.test(l.type||"")&&!at.access(l,"globalEval")&&E.contains(h,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?E._evalUrl&&!l.noModule&&E._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},h):b(l.textContent.replace(qt,""),l,h))}return t}function $t(t,e,i){for(var n,r=e?E.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||E.cleanData(St(n)),n.parentNode&&(i&&vt(n)&&Lt(St(n,"script")),n.parentNode.removeChild(n));return t}E.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var n,r,o,s,a=t.cloneNode(!0),c=vt(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(s=St(a),n=0,r=(o=St(t)).length;n<r;n++)Wt(o[n],s[n]);if(e)if(i)for(o=o||St(t),s=s||St(a),n=0,r=o.length;n<r;n++)Ht(o[n],s[n]);else Ht(t,a);return(s=St(a,"script")).length>0&&Lt(s,!c&&St(t,"script")),a},cleanData:function(t){for(var e,i,n,r=E.event.special,o=0;void 0!==(i=t[o]);o++)if(ot(i)){if(e=i[at.expando]){if(e.events)for(n in e.events)r[n]?E.event.remove(i,n):E.removeEvent(i,n,e.handle);i[at.expando]=void 0}i[ct.expando]&&(i[ct.expando]=void 0)}}}),E.fn.extend({detach:function(t){return $t(this,t,!0)},remove:function(t){return $t(this,t)},text:function(t){return tt(this,(function(t){return void 0===t?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Gt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ot(this,t).appendChild(t)}))},prepend:function(){return Gt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ot(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Gt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Gt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(St(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return E.clone(this,t,e)}))},html:function(t){return tt(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ft.test(t)&&!At[(Tt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(E.cleanData(St(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Gt(this,arguments,(function(e){var i=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(St(this)),i&&i.replaceChild(e,this))}),t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){E.fn[t]=function(t){for(var i,n=[],r=E(t),o=r.length-1,s=0;s<=o;s++)i=s===o?this:this.clone(!0),E(r[s])[e](i),l.apply(n,i.get());return this.pushStack(n)}}));var Yt=new RegExp("^("+ut+")(?!px)[a-z%]+$","i"),Xt=/^--/,Vt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Qt=function(t,e,i){var n,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in n=i.call(t),e)t.style[r]=o[r];return n},Jt=new RegExp(pt.join("|"),"i");function Zt(t,e,i){var n,r,o,s,a=Xt.test(e),c=t.style;return(i=i||Vt(t))&&(s=i.getPropertyValue(e)||i[e],a&&s&&(s=s.replace(j,"$1")||void 0),""!==s||vt(t)||(s=E.style(t,e)),!v.pixelBoxStyles()&&Yt.test(s)&&Jt.test(e)&&(n=c.width,r=c.minWidth,o=c.maxWidth,c.minWidth=c.maxWidth=c.width=s,s=i.width,c.width=n,c.minWidth=r,c.maxWidth=o)),void 0!==s?s+"":s}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(h){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",_t.appendChild(l).appendChild(h);var t=n.getComputedStyle(h);i="1%"!==t.top,c=12===e(t.marginLeft),h.style.right="60%",s=36===e(t.right),r=36===e(t.width),h.style.position="absolute",o=12===e(h.offsetWidth/3),_t.removeChild(l),h=null}}function e(t){return Math.round(parseFloat(t))}var i,r,o,s,a,c,l=m.createElement("div"),h=m.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===h.style.backgroundClip,E.extend(v,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,i,r;return null==a&&(t=m.createElement("table"),e=m.createElement("tr"),i=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",i.style.height="9px",i.style.display="block",_t.appendChild(t).appendChild(e).appendChild(i),r=n.getComputedStyle(e),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===e.offsetHeight,_t.removeChild(t)),a}}))}();var ee=["Webkit","Moz","ms"],ie=m.createElement("div").style,ne={};function re(t){return E.cssProps[t]||ne[t]||(t in ie?t:ne[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=ee.length;i--;)if((t=ee[i]+e)in ie)return t}(t)||t)}var oe=/^(none|table(?!-c[ea]).+)/,se={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function ce(t,e,i){var n=ft.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function le(t,e,i,n,r,o){var s="width"===e?1:0,a=0,c=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=E.css(t,i+pt[s],!0,r)),n?("content"===i&&(c-=E.css(t,"padding"+pt[s],!0,r)),"margin"!==i&&(c-=E.css(t,"border"+pt[s]+"Width",!0,r))):(c+=E.css(t,"padding"+pt[s],!0,r),"padding"!==i?c+=E.css(t,"border"+pt[s]+"Width",!0,r):a+=E.css(t,"border"+pt[s]+"Width",!0,r));return!n&&o>=0&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-c-a-.5))||0),c+l}function he(t,e,i){var n=Vt(t),r=(!v.boxSizingReliable()||i)&&"border-box"===E.css(t,"boxSizing",!1,n),o=r,s=Zt(t,e,n),a="offset"+e[0].toUpperCase()+e.slice(1);if(Yt.test(s)){if(!i)return s;s="auto"}return(!v.boxSizingReliable()&&r||!v.reliableTrDimensions()&&M(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===E.css(t,"display",!1,n))&&t.getClientRects().length&&(r="border-box"===E.css(t,"boxSizing",!1,n),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+le(t,e,i||(r?"border":"content"),o,n,s)+"px"}function de(t,e,i,n,r){return new de.prototype.init(t,e,i,n,r)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Zt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=rt(e),c=Xt.test(e),l=t.style;if(c||(e=re(a)),s=E.cssHooks[e]||E.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:l[e];"string"==(o=typeof i)&&(r=ft.exec(i))&&r[1]&&(i=mt(t,e,r),o="number"),null!=i&&i==i&&("number"!==o||c||(i+=r&&r[3]||(E.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(c?l.setProperty(e,i):l[e]=i))}},css:function(t,e,i,n){var r,o,s,a=rt(e);return Xt.test(e)||(e=re(a)),(s=E.cssHooks[e]||E.cssHooks[a])&&"get"in s&&(r=s.get(t,!0,i)),void 0===r&&(r=Zt(t,e,n)),"normal"===r&&e in ae&&(r=ae[e]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),E.each(["height","width"],(function(t,e){E.cssHooks[e]={get:function(t,i,n){if(i)return!oe.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?he(t,e,n):Qt(t,se,(function(){return he(t,e,n)}))},set:function(t,i,n){var r,o=Vt(t),s=!v.scrollboxSize()&&"absolute"===o.position,a=(s||n)&&"border-box"===E.css(t,"boxSizing",!1,o),c=n?le(t,e,n,a,o):0;return a&&s&&(c-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-le(t,e,"border",!1,o)-.5)),c&&(r=ft.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=E.css(t,e)),ce(0,i,c)}}})),E.cssHooks.marginLeft=te(v.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Zt(t,"marginLeft"))||t.getBoundingClientRect().left-Qt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(t,e){E.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+pt[n]+e]=o[n]||o[n-2]||o[0];return r}},"margin"!==t&&(E.cssHooks[t+e].set=ce)})),E.fn.extend({css:function(t,e){return tt(this,(function(t,e,i){var n,r,o={},s=0;if(Array.isArray(e)){for(n=Vt(t),r=e.length;s<r;s++)o[e[s]]=E.css(t,e[s],!1,n);return o}return void 0!==i?E.style(t,e,i):E.css(t,e)}),t,e,arguments.length>1)}}),E.Tween=de,de.prototype={constructor:de,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(E.cssNumber[i]?"":"px")},cur:function(){var t=de.propHooks[this.prop];return t&&t.get?t.get(this):de.propHooks._default.get(this)},run:function(t){var e,i=de.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):de.propHooks._default.set(this),this}},de.prototype.init.prototype=de.prototype,de.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||!E.cssHooks[t.prop]&&null==t.elem.style[re(t.prop)]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}},de.propHooks.scrollTop=de.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=de.prototype.init,E.fx.step={};var ue,fe,pe=/^(?:toggle|show|hide)$/,_e=/queueHooks$/;function ve(){fe&&(!1===m.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ve):n.setTimeout(ve,E.fx.interval),E.fx.tick())}function ge(){return n.setTimeout((function(){ue=void 0})),ue=Date.now()}function ye(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)r["margin"+(i=pt[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function me(t,e,i){for(var n,r=(xe.tweeners[e]||[]).concat(xe.tweeners["*"]),o=0,s=r.length;o<s;o++)if(n=r[o].call(i,e,t))return n}function xe(t,e,i){var n,r,o=0,s=xe.prefilters.length,a=E.Deferred().always((function(){delete c.elem})),c=function(){if(r)return!1;for(var e=ue||ge(),i=Math.max(0,l.startTime+l.duration-e),n=1-(i/l.duration||0),o=0,s=l.tweens.length;o<s;o++)l.tweens[o].run(n);return a.notifyWith(t,[l,n,i]),n<1&&s?i:(s||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},i),originalProperties:e,originalOptions:i,startTime:ue||ge(),duration:i.duration,tweens:[],createTween:function(e,i){var n=E.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var i=0,n=e?l.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)l.tweens[i].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),h=l.props;for(function(t,e){var i,n,r,o,s;for(i in t)if(r=e[n=rt(i)],o=t[i],Array.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(s=E.cssHooks[n])&&"expand"in s)for(i in o=s.expand(o),delete t[n],o)i in t||(t[i]=o[i],e[i]=r);else e[n]=r}(h,l.opts.specialEasing);o<s;o++)if(n=xe.prefilters[o].call(l,t,h,l.opts))return g(n.stop)&&(E._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return E.map(h,me,l),g(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),E.fx.timer(E.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l}E.Animation=E.extend(xe,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return mt(i.elem,t,ft.exec(e),i),i}]},tweener:function(t,e){g(t)?(e=t,t=["*"]):t=t.match($);for(var i,n=0,r=t.length;n<r;n++)i=t[n],xe.tweeners[i]=xe.tweeners[i]||[],xe.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,r,o,s,a,c,l,h,d="width"in e||"height"in e,u=this,f={},p=t.style,_=t.nodeType&&yt(t),v=at.get(t,"fxshow");for(n in i.queue||(null==(s=E._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,u.always((function(){u.always((function(){s.unqueued--,E.queue(t,"fx").length||s.empty.fire()}))}))),e)if(r=e[n],pe.test(r)){if(delete e[n],o=o||"toggle"===r,r===(_?"hide":"show")){if("show"!==r||!v||void 0===v[n])continue;_=!0}f[n]=v&&v[n]||E.style(t,n)}if((c=!E.isEmptyObject(e))||!E.isEmptyObject(f))for(n in d&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=v&&v.display)&&(l=at.get(t,"display")),"none"===(h=E.css(t,"display"))&&(l?h=l:(wt([t],!0),l=t.style.display||l,h=E.css(t,"display"),wt([t]))),("inline"===h||"inline-block"===h&&null!=l)&&"none"===E.css(t,"float")&&(c||(u.done((function(){p.display=l})),null==l&&(h=p.display,l="none"===h?"":h)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",u.always((function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}))),c=!1,f)c||(v?"hidden"in v&&(_=v.hidden):v=at.access(t,"fxshow",{display:l}),o&&(v.hidden=!_),_&&wt([t],!0),u.done((function(){for(n in _||wt([t]),at.remove(t,"fxshow"),f)E.style(t,n,f[n])}))),c=me(_?v[n]:0,n,u),n in v||(v[n]=c.start,_&&(c.end=c.start,c.start=0))}],prefilter:function(t,e){e?xe.prefilters.unshift(t):xe.prefilters.push(t)}}),E.speed=function(t,e,i){var n=t&&"object"==typeof t?E.extend({},t):{complete:i||!i&&e||g(t)&&t,duration:t,easing:i&&e||e&&!g(e)&&e};return E.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in E.fx.speeds?n.duration=E.fx.speeds[n.duration]:n.duration=E.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){g(n.old)&&n.old.call(this),n.queue&&E.dequeue(this,n.queue)},n},E.fn.extend({fadeTo:function(t,e,i,n){return this.filter(yt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=E.isEmptyObject(t),o=E.speed(e,i,n),s=function(){var e=xe(this,E.extend({},t),o);(r||at.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",o=E.timers,s=at.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&_e.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));!e&&i||E.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=at.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=E.timers,s=n?n.length:0;for(i.finish=!0,E.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),E.each(["toggle","show","hide"],(function(t,e){var i=E.fn[e];E.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ye(e,!0),t,n,r)}})),E.each({slideDown:ye("show"),slideUp:ye("hide"),slideToggle:ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){E.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),E.timers=[],E.fx.tick=function(){var t,e=0,i=E.timers;for(ue=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||E.fx.stop(),ue=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){fe||(fe=!0,ve())},E.fx.stop=function(){fe=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,i){var r=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(r)}}))},function(){var t=m.createElement("input"),e=m.createElement("select").appendChild(m.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=m.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var be,we=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return tt(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){E.removeAttr(this,t)}))}}),E.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?E.prop(t,e,i):(1===o&&E.isXMLDoc(t)||(r=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?be:void 0)),void 0!==i?null===i?void E.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:null==(n=E.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&M(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match($);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),be={set:function(t,e,i){return!1===e?E.removeAttr(t,i):t.setAttribute(i,i),i}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=we[e]||E.find.attr;we[e]=function(t,e,n){var r,o,s=e.toLowerCase();return n||(o=we[s],we[s]=r,r=null!=i(t,e,n)?s:null,we[s]=o),r}}));var ke=/^(?:input|select|textarea|button)$/i,Ce=/^(?:a|area)$/i;function Ee(t){return(t.match($)||[]).join(" ")}function Te(t){return t.getAttribute&&t.getAttribute("class")||""}function Me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match($)||[]}E.fn.extend({prop:function(t,e){return tt(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[E.propFix[t]||t]}))}}),E.extend({prop:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(t)||(e=E.propFix[e]||e,r=E.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):ke.test(t.nodeName)||Ce.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(t){var e,i,n,r,o,s;return g(t)?this.each((function(e){E(this).addClass(t.call(this,e,Te(this)))})):(e=Me(t)).length?this.each((function(){if(n=Te(this),i=1===this.nodeType&&" "+Ee(n)+" "){for(o=0;o<e.length;o++)r=e[o],i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=Ee(i),n!==s&&this.setAttribute("class",s)}})):this},removeClass:function(t){var e,i,n,r,o,s;return g(t)?this.each((function(e){E(this).removeClass(t.call(this,e,Te(this)))})):arguments.length?(e=Me(t)).length?this.each((function(){if(n=Te(this),i=1===this.nodeType&&" "+Ee(n)+" "){for(o=0;o<e.length;o++)for(r=e[o];i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");s=Ee(i),n!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(t,e){var i,n,r,o,s=typeof t,a="string"===s||Array.isArray(t);return g(t)?this.each((function(i){E(this).toggleClass(t.call(this,i,Te(this),e),e)})):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(i=Me(t),this.each((function(){if(a)for(o=E(this),r=0;r<i.length;r++)n=i[r],o.hasClass(n)?o.removeClass(n):o.addClass(n);else void 0!==t&&"boolean"!==s||((n=Te(this))&&at.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===t?"":at.get(this,"__className__")||""))})))},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+Ee(Te(i))+" ").indexOf(e)>-1)return!0;return!1}});var Ae=/\r/g;E.fn.extend({val:function(t){var e,i,n,r=this[0];return arguments.length?(n=g(t),this.each((function(i){var r;1===this.nodeType&&(null==(r=n?t.call(this,i,E(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=E.map(r,(function(t){return null==t?"":t+""}))),(e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(Ae,""):null==i?"":i:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:Ee(E.text(t))}},select:{get:function(t){var e,i,n,r=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],c=s?o+1:r.length;for(n=o<0?c:s?o:0;n<c;n++)if(((i=r[n]).selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!M(i.parentNode,"optgroup"))){if(e=E(i).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var i,n,r=t.options,o=E.makeArray(e),s=r.length;s--;)((n=r[s]).selected=E.inArray(E.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},v.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Se=n.location,Le={guid:Date.now()},Ne=/\?/;E.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){}return i=e&&e.getElementsByTagName("parsererror")[0],e&&!i||E.error("Invalid XML: "+(i?E.map(i.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var je=/^(?:focusinfocus|focusoutblur)$/,ze=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,i,r){var o,s,a,c,l,h,d,u,p=[i||m],_=f.call(t,"type")?t.type:t,v=f.call(t,"namespace")?t.namespace.split("."):[];if(s=u=a=i=i||m,3!==i.nodeType&&8!==i.nodeType&&!je.test(_+E.event.triggered)&&(_.indexOf(".")>-1&&(v=_.split("."),_=v.shift(),v.sort()),l=_.indexOf(":")<0&&"on"+_,(t=t[E.expando]?t:new E.Event(_,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:E.makeArray(e,[t]),d=E.event.special[_]||{},r||!d.trigger||!1!==d.trigger.apply(i,e))){if(!r&&!d.noBubble&&!y(i)){for(c=d.delegateType||_,je.test(c+_)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(i.ownerDocument||m)&&p.push(a.defaultView||a.parentWindow||n)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)u=s,t.type=o>1?c:d.bindType||_,(h=(at.get(s,"events")||Object.create(null))[t.type]&&at.get(s,"handle"))&&h.apply(s,e),(h=l&&s[l])&&h.apply&&ot(s)&&(t.result=h.apply(s,e),!1===t.result&&t.preventDefault());return t.type=_,r||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),e)||!ot(i)||l&&g(i[_])&&!y(i)&&((a=i[l])&&(i[l]=null),E.event.triggered=_,t.isPropagationStopped()&&u.addEventListener(_,ze),i[_](),t.isPropagationStopped()&&u.removeEventListener(_,ze),E.event.triggered=void 0,a&&(i[l]=a)),t.result}},simulate:function(t,e,i){var n=E.extend(new E.Event,i,{type:t,isSimulated:!0});E.event.trigger(n,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each((function(){E.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return E.event.trigger(t,e,i,!0)}});var De=/\[\]$/,Pe=/\r?\n/g,Be=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;function Fe(t,e,i,n){var r;if(Array.isArray(e))E.each(e,(function(e,r){i||De.test(t)?n(t,r):Fe(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,n)}));else if(i||"object"!==w(e))n(t,e);else for(r in e)Fe(t+"["+r+"]",e[r],i,n)}E.param=function(t,e){var i,n=[],r=function(t,e){var i=g(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,(function(){r(this.name,this.value)}));else for(i in t)Fe(i,t[i],e,r);return n.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&Re.test(this.nodeName)&&!Be.test(t)&&(this.checked||!Et.test(t))})).map((function(t,e){var i=E(this).val();return null==i?null:Array.isArray(i)?E.map(i,(function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}})):{name:e.name,value:i.replace(Pe,"\r\n")}})).get()}});var Ie=/%20/g,qe=/#.*$/,Oe=/([?&])_=[^&]*/,Ke=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ue=/^(?:GET|HEAD)$/,He=/^\/\//,We={},Ge={},$e="*/".concat("*"),Ye=m.createElement("a");function Xe(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match($)||[];if(g(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Ve(t,e,i,n){var r={},o=t===Ge;function s(a){var c;return r[a]=!0,E.each(t[a]||[],(function(t,a){var l=a(e,i,n);return"string"!=typeof l||o||r[l]?o?!(c=l):void 0:(e.dataTypes.unshift(l),s(l),!1)})),c}return s(e.dataTypes[0])||!r["*"]&&s("*")}function Qe(t,e){var i,n,r=E.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&E.extend(!0,t,n),t}Ye.href=Se.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Se.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Se.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$e,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Qe(Qe(t,E.ajaxSettings),e):Qe(E.ajaxSettings,t)},ajaxPrefilter:Xe(We),ajaxTransport:Xe(Ge),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,s,a,c,l,h,d,u,f=E.ajaxSetup({},e),p=f.context||f,_=f.context&&(p.nodeType||p.jquery)?E(p):E.event,v=E.Deferred(),g=E.Callbacks("once memory"),y=f.statusCode||{},x={},b={},w="canceled",k={readyState:0,getResponseHeader:function(t){var e;if(l){if(!s)for(s={};e=Ke.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==l&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)k.always(t[k.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||w;return i&&i.abort(e),C(0,e),this}};if(v.promise(k),f.url=((t||f.url||Se.href)+"").replace(He,Se.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match($)||[""],null==f.crossDomain){c=m.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Ye.protocol+"//"+Ye.host!=c.protocol+"//"+c.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=E.param(f.data,f.traditional)),Ve(We,f,e,k),l)return k;for(d in(h=E.event&&f.global)&&0==E.active++&&E.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ue.test(f.type),r=f.url.replace(qe,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ie,"+")):(u=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(Ne.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Oe,"$1"),u=(Ne.test(r)?"&":"?")+"_="+Le.guid+++u),f.url=r+u),f.ifModified&&(E.lastModified[r]&&k.setRequestHeader("If-Modified-Since",E.lastModified[r]),E.etag[r]&&k.setRequestHeader("If-None-Match",E.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+$e+"; q=0.01":""):f.accepts["*"]),f.headers)k.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(p,k,f)||l))return k.abort();if(w="abort",g.add(f.complete),k.done(f.success),k.fail(f.error),i=Ve(Ge,f,e,k)){if(k.readyState=1,h&&_.trigger("ajaxSend",[k,f]),l)return k;f.async&&f.timeout>0&&(a=n.setTimeout((function(){k.abort("timeout")}),f.timeout));try{l=!1,i.send(x,C)}catch(t){if(l)throw t;C(-1,t)}}else C(-1,"No Transport");function C(t,e,s,c){var d,u,m,x,b,w=e;l||(l=!0,a&&n.clearTimeout(a),i=void 0,o=c||"",k.readyState=t>0?4:0,d=t>=200&&t<300||304===t,s&&(x=function(t,e,i){for(var n,r,o,s,a=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){c.unshift(r);break}if(c[0]in i)o=c[0];else{for(r in i){if(!c[0]||t.converters[r+" "+c[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==c[0]&&c.unshift(o),i[o]}(f,k,s)),!d&&E.inArray("script",f.dataTypes)>-1&&E.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),x=function(t,e,i,n){var r,o,s,a,c,l={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=h.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!c&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=o,o=h.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=l[c+" "+o]||l["* "+o]))for(r in l)if((a=r.split(" "))[1]===o&&(s=l[c+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[r]:!0!==l[r]&&(o=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+c+" to "+o}}}return{state:"success",data:e}}(f,x,k,d),d?(f.ifModified&&((b=k.getResponseHeader("Last-Modified"))&&(E.lastModified[r]=b),(b=k.getResponseHeader("etag"))&&(E.etag[r]=b)),204===t||"HEAD"===f.type?w="nocontent":304===t?w="notmodified":(w=x.state,u=x.data,d=!(m=x.error))):(m=w,!t&&w||(w="error",t<0&&(t=0))),k.status=t,k.statusText=(e||w)+"",d?v.resolveWith(p,[u,w,k]):v.rejectWith(p,[k,w,m]),k.statusCode(y),y=void 0,h&&_.trigger(d?"ajaxSuccess":"ajaxError",[k,f,d?u:m]),g.fireWith(p,[k,w]),h&&(_.trigger("ajaxComplete",[k,f]),--E.active||E.event.trigger("ajaxStop")))}return k},getJSON:function(t,e,i){return E.get(t,e,i,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],(function(t,e){E[e]=function(t,i,n,r){return g(i)&&(r=r||n,n=i,i=void 0),E.ajax(E.extend({url:t,type:e,dataType:r,data:i,success:n},E.isPlainObject(t)&&t))}})),E.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),E._evalUrl=function(t,e,i){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){E.globalEval(t,e,i)}})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(g(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return g(t)?this.each((function(e){E(this).wrapInner(t.call(this,e))})):this.each((function(){var e=E(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=g(t);return this.each((function(i){E(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Je={0:200,1223:204},Ze=E.ajaxSettings.xhr();v.cors=!!Ze&&"withCredentials"in Ze,v.ajax=Ze=!!Ze,E.ajaxTransport((function(t){var e,i;if(v.cors||Ze&&!t.crossDomain)return{send:function(r,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(s,r[s]);e=function(t){return function(){e&&(e=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Je[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),i=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout((function(){e&&i()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),E.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),E.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(n,r){e=E("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),m.head.appendChild(e[0])},abort:function(){i&&i()}}}));var ti,ei=[],ii=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ei.pop()||E.expando+"_"+Le.guid++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",(function(t,e,i){var r,o,s,a=!1!==t.jsonp&&(ii.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ii.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(ii,"$1"+r):!1!==t.jsonp&&(t.url+=(Ne.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||E.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=n[r],n[r]=function(){s=arguments},i.always((function(){void 0===o?E(n).removeProp(r):n[r]=o,t[r]&&(t.jsonpCallback=e.jsonpCallback,ei.push(r)),s&&g(o)&&o(s[0]),s=o=void 0})),"script"})),v.createHTMLDocument=((ti=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===ti.childNodes.length),E.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(v.createHTMLDocument?((n=(e=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,e.head.appendChild(n)):e=m),o=!i&&[],(r=q.exec(t))?[e.createElement(r[1])]:(r=jt([t],e,o),o&&o.length&&E(o).remove(),E.merge([],r.childNodes)));var n,r,o},E.fn.load=function(t,e,i){var n,r,o,s=this,a=t.indexOf(" ");return a>-1&&(n=Ee(t.slice(a)),t=t.slice(0,a)),g(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&E.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){o=arguments,s.html(n?E("<div>").append(E.parseHTML(t)).find(n):t)})).always(i&&function(t,e){s.each((function(){i.apply(this,o||[t.responseText,e,t])}))}),this},E.expr.pseudos.animated=function(t){return E.grep(E.timers,(function(e){return t===e.elem})).length},E.offset={setOffset:function(t,e,i){var n,r,o,s,a,c,l=E.css(t,"position"),h=E(t),d={};"static"===l&&(t.style.position="relative"),a=h.offset(),o=E.css(t,"top"),c=E.css(t,"left"),("absolute"===l||"fixed"===l)&&(o+c).indexOf("auto")>-1?(s=(n=h.position()).top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(c)||0),g(e)&&(e=e.call(t,i,E.extend({},a))),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):h.css(d)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){E.offset.setOffset(this,t,e)}));var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],r={top:0,left:0};if("fixed"===E.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===E.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((r=E(t).offset()).top+=E.css(t,"borderTopWidth",!0),r.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-E.css(n,"marginTop",!0),left:e.left-r.left-E.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||_t}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;E.fn[t]=function(n){return tt(this,(function(t,n,r){var o;if(y(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r)return o?o[e]:t[n];o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):t[n]=r}),t,n,arguments.length)}})),E.each(["top","left"],(function(t,e){E.cssHooks[e]=te(v.pixelPosition,(function(t,i){if(i)return i=Zt(t,e),Yt.test(i)?E(t).position()[e]+"px":i}))})),E.each({Height:"height",Width:"width"},(function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){E.fn[n]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(!0===r||!0===o?"margin":"border");return tt(this,(function(e,i,r){var o;return y(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?E.css(e,i,a):E.style(e,i,r,a)}),e,s?r:void 0,s)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){E.fn[e]=function(t){return this.on(e,t)}})),E.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){E.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}));var ni=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),g(t))return n=a.call(arguments,2),r=function(){return t.apply(e||this,n.concat(a.call(arguments)))},r.guid=t.guid=t.guid||E.guid++,r},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=M,E.isFunction=g,E.isWindow=y,E.camelCase=rt,E.type=w,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},E.trim=function(t){return null==t?"":(t+"").replace(ni,"$1")},void 0===(i=function(){return E}.apply(e,[]))||(t.exports=i);var ri=n.jQuery,oi=n.$;return E.noConflict=function(t){return n.$===E&&(n.$=oi),t&&n.jQuery===E&&(n.jQuery=ri),E},void 0===r&&(n.jQuery=n.$=E),E}))},951:(t,e,i)=>{"use strict";t.exports=i.p+"83543eec05909a0ca535.png"},282:(t,e,i)=>{"use strict";t.exports=i.p+"31f5ef0c8dffa5492da6.png"},517:(t,e,i)=>{"use strict";t.exports=i.p+"3ecd27d9240d163175c1.png"},856:(t,e,i)=>{"use strict";t.exports=i.p+"857e29fea39a49d24eab.png"},873:(t,e,i)=>{"use strict";t.exports=i.p+"0d1cb381129368ba84d1.png"},551:(t,e,i)=>{"use strict";t.exports=i.p+"ef6efa6101e076a26a10.png"},337:(t,e,i)=>{"use strict";t.exports=i.p+"23da7583e2e60bf72666.png"},302:(t,e,i)=>{"use strict";t.exports=i.p+"4392c3e322617baf9aa7.png"},794:(t,e,i)=>{"use strict";t.exports=i.p+"c72adc7afbb90c3d3def.png"},994:(t,e,i)=>{"use strict";t.exports=i.p+"65a7bd79167e55459bb5.png"}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}i.m=t,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.p="/dist/",i.b=document.baseURI||self.location.href,(()=>{"use strict";class t{static checkWebGL(t){const e=["experimental-webgl","webkit-3d","moz-webgl"];var i=t.getContext("webgl",{preserveDrawingBuffer:!0});if(!i)for(var n=0;n<e.length;n++){try{i=t.getContext(e[n],{preserveDrawingBuffer:!0})}catch(t){}if(i)break}return i||alert("WebGL not available. Please use a new version of Chrome or Firefox."),i}static createProgram(e,i,n){var r=e.createProgram(),o=t.getShader(e,e.VERTEX_SHADER,i),s=t.getShader(e,e.FRAGMENT_SHADER,n);if(e.attachShader(r,o),e.attachShader(r,s),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS)){var a=e.getProgramInfoLog(r);return console.log("Failed to link program: "+a),e.deleteProgram(r),e.deleteShader(s),e.deleteShader(o),null}return r}static renderBuffers(t,e,i,n=null){let r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let n=0;n<r;++n){let r=t.getActiveAttrib(e,n);if(!r)break;var o=i[r.name],s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,o.bufferData,t.STATIC_DRAW);var a=t.getAttribLocation(e,r.name);t.enableVertexAttribArray(a),t.vertexAttribPointer(a,o.size,t.FLOAT,!1,0,o.bufferData.BYTES_PER_ELEMENT*o.offset)}if(n){var c=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}}static getShader(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log("An error occurred compiling the shaders:"+t.getShaderInfoLog(n)),t.deleteShader(n),null)}}class e{static inCanvas(t){var e=t.clientX,i=t.clientY,n=t.target.getBoundingClientRect();return n.left<=e&&e<n.right&&n.top<=i&&i<n.bottom}static pixelInputToGLCoord(t,e){var i=t.clientX,n=t.clientY,r=e.width/2,o=e.height/2,s=t.target.getBoundingClientRect();return{relx:i=(i-s.left-r)/r,rely:n=(o-(n-s.top))/o}}static pixelInputToCanvasCoord(t,e){var i=t.clientX,n=t.clientY,r=t.target.getBoundingClientRect();return{x:i-=r.left,y:n=r.bottom-n}}static pixelsFromMouseClick(t,i,n){var r=e.pixelInputToCanvasCoord(t,i),o=new Uint8Array(4);return n.readPixels(r.x,r.y,1,1,n.RGBA,n.UNSIGNED_BYTE,o),o}}var n=1e-6,r="undefined"!=typeof Float32Array?Float32Array:Array;function o(){var t=new r(4);return r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function s(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function a(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*o+i[12]*s,t[1]=i[1]*n+i[5]*r+i[9]*o+i[13]*s,t[2]=i[2]*n+i[6]*r+i[10]*o+i[14]*s,t[3]=i[3]*n+i[7]*r+i[11]*o+i[15]*s,t}function c(){var t=new r(3);return r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function l(t){var e=t[0],i=t[1],n=t[2];return Math.hypot(e,i,n)}function h(t,e,i){var n=new r(3);return n[0]=t,n[1]=e,n[2]=i,n}function d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function u(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function f(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function p(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function _(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t}function v(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.hypot(i,n,r)}function g(t,e){var i=e[0],n=e[1],r=e[2],o=i*i+n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function y(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function m(t,e,i){var n=e[0],r=e[1],o=e[2],s=i[0],a=i[1],c=i[2];return t[0]=r*c-o*a,t[1]=o*s-n*c,t[2]=n*a-r*s,t}function x(t,e,i){var n=i[0],r=i[1],o=i[2],s=i[3],a=e[0],c=e[1],l=e[2],h=r*l-o*c,d=o*a-n*l,u=n*c-r*a,f=r*u-o*d,p=o*h-n*u,_=n*d-r*h,v=2*s;return h*=v,d*=v,u*=v,f*=2,p*=2,_*=2,t[0]=a+h+f,t[1]=c+d+p,t[2]=l+u+_,t}function b(t){return t[0]=0,t[1]=0,t[2]=0,t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),o();var w=v,k=l;function C(){var t=new r(16);return r!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function E(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e,i){var n,r,o,s,a,c,l,h,d,u,f,p,_=i[0],v=i[1],g=i[2];return e===t?(t[12]=e[0]*_+e[4]*v+e[8]*g+e[12],t[13]=e[1]*_+e[5]*v+e[9]*g+e[13],t[14]=e[2]*_+e[6]*v+e[10]*g+e[14],t[15]=e[3]*_+e[7]*v+e[11]*g+e[15]):(n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],h=e[7],d=e[8],u=e[9],f=e[10],p=e[11],t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=c,t[6]=l,t[7]=h,t[8]=d,t[9]=u,t[10]=f,t[11]=p,t[12]=n*_+a*v+d*g+e[12],t[13]=r*_+c*v+u*g+e[13],t[14]=o*_+l*v+f*g+e[14],t[15]=s*_+h*v+p*g+e[15]),t}function M(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function A(t,e,i,n){var r=e[0],o=e[1],s=e[2],a=e[3],c=r+r,l=o+o,h=s+s,d=r*c,u=r*l,f=r*h,p=o*l,_=o*h,v=s*h,g=a*c,y=a*l,m=a*h,x=n[0],b=n[1],w=n[2];return t[0]=(1-(p+v))*x,t[1]=(u+m)*x,t[2]=(f-y)*x,t[3]=0,t[4]=(u-m)*b,t[5]=(1-(d+v))*b,t[6]=(_+g)*b,t[7]=0,t[8]=(f+y)*w,t[9]=(_-g)*w,t[10]=(1-(d+p))*w,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}c();var S;function L(t,e){return t[0]*e[0]+t[1]*e[1]}S=new r(2),r!=Float32Array&&(S[0]=0,S[1]=0);const N=Math.PI;function j(t){return Math.cos(t)}function z(t){return Math.sin(t)}class D{constructor(t=N/4,e=N/4,i=12,n=[0,0,1.5]){this._spherical={theta:t,phi:e,radius:i},this._position=[0,0,0],this._ray={absPos:[0,0,0],normal:[0,0],toWorld:C()},this._transformation=n,this._mView=C(),this._mProj=C(),this._reset=!1,this.updateCameraPos(),this.setRay()}update(t,e,i,r){var o=t.getUniformLocation(e,"mView"),s=t.getUniformLocation(e,"mProj");t.viewport(0,0,i,r),function(t,e,i,n,r){var o,s=1/Math.tan(e/2);t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(n-r),t[10]=(r+n)*o,t[14]=2*r*n*o):(t[10]=-1,t[14]=-2*n)}(this._mProj,N/4,i/r,1,5*this._spherical.radius),function(t,e,i,r){var o,s,a,c,l,h,d,u,f,p,_=e[0],v=e[1],g=e[2],y=r[0],m=r[1],x=r[2],b=i[0],w=i[1],k=i[2];Math.abs(_-b)<n&&Math.abs(v-w)<n&&Math.abs(g-k)<n?E(t):(d=_-b,u=v-w,f=g-k,o=m*(f*=p=1/Math.hypot(d,u,f))-x*(u*=p),s=x*(d*=p)-y*f,a=y*u-m*d,(p=Math.hypot(o,s,a))?(o*=p=1/p,s*=p,a*=p):(o=0,s=0,a=0),c=u*a-f*s,l=f*o-d*a,h=d*s-u*o,(p=Math.hypot(c,l,h))?(c*=p=1/p,l*=p,h*=p):(c=0,l=0,h=0),t[0]=o,t[1]=c,t[2]=d,t[3]=0,t[4]=s,t[5]=l,t[6]=u,t[7]=0,t[8]=a,t[9]=h,t[10]=f,t[11]=0,t[12]=-(o*_+s*v+a*g),t[13]=-(c*_+l*v+h*g),t[14]=-(d*_+u*v+f*g),t[15]=1)}(this._mView,this._position,[0,0,0],[0,0,1]),T(this._mView,this._mView,this._transformation),t.uniformMatrix4fv(o,!1,this._mView),t.uniformMatrix4fv(s,!1,this._mProj)}resetCam(t,e,i,n){const r=N/4-this._spherical.theta,o=N/4-this._spherical.phi,s=12-this._spherical.radius;r<-N?this._spherical.theta+=.02:this._spherical.theta-=.02,this._spherical.phi+=Math.sign(o)/50,this._spherical.phi=Math.min(Math.max(1e-4,this._spherical.phi),N-1e-4),this._spherical.radius+=s/50;var a=f(c(),[0,0,1.5],this._transformation);_(this._transformation,this._transformation,a,.02),Math.abs(r)<.005&&Math.abs(o)<.005&&Math.abs(s)<.01&&k(a)<.01&&(this.reset=!1),this.updateCameraPos(),this.update(t,e,i,n)}updateCameraPos(){this._spherical.theta>2*N&&(this._spherical.theta=this._spherical.theta-2*N),this._spherical.theta<0&&(this._spherical.theta=2*N-this._spherical.theta),this._position[0]=this._spherical.radius*z(this._spherical.phi)*j(this._spherical.theta),this._position[1]=this._spherical.radius*z(this._spherical.phi)*z(this._spherical.theta),this._position[2]=this._spherical.radius*j(this._spherical.phi)}addAngle(t,e){this._spherical.phi=this._spherical.phi-e*Math.sqrt(this._spherical.radius),this._spherical.theta=this._spherical.theta-t*Math.sqrt(this._spherical.radius),this._spherical.phi=Math.min(Math.max(1e-4,this._spherical.phi),N-1e-4),this.updateCameraPos()}addRadius(t){this._spherical.radius+=5e-4*t*this._spherical.radius,this._spherical.radius=Math.min(Math.max(2,this._spherical.radius),35),this.updateCameraPos()}transform(t,e,i){i?this._transformation[2]=this._transformation[2]-z(this._spherical.phi)*e*this._spherical.radius:(this._transformation[0]=this._transformation[0]-z(this._spherical.theta)*t*this._spherical.radius,this._transformation[0]=this._transformation[0]+j(this._spherical.theta)*e*this._spherical.radius,this._transformation[1]=this._transformation[1]+j(this._spherical.theta)*t*this._spherical.radius,this._transformation[1]=this._transformation[1]+z(this._spherical.theta)*e*this._spherical.radius),this._transformation[0]=Math.min(Math.max(-15,this._transformation[0]),15),this._transformation[1]=Math.min(Math.max(-15,this._transformation[1]),15),this._transformation[2]=Math.min(Math.max(-15,this._transformation[2]),15)}setRay(){var t,e,i,n,r,o,s,a,c,l,h,d,u,p,_,v,g,y,m,x,b,w,k,E,T,M,A,S,L,N,j;t=this._ray.toWorld,e=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],h=e[7],d=e[8],u=e[9],f=e[10],p=e[11],_=e[12],v=e[13],g=e[14],y=e[15],m=i[0],x=i[1],b=i[2],w=i[3];return t[0]=m*n+x*a+b*d+w*_,t[1]=m*r+x*c+b*u+w*v,t[2]=m*o+x*l+b*f+w*g,t[3]=m*s+x*h+b*p+w*y,m=i[4],x=i[5],b=i[6],w=i[7],t[4]=m*n+x*a+b*d+w*_,t[5]=m*r+x*c+b*u+w*v,t[6]=m*o+x*l+b*f+w*g,t[7]=m*s+x*h+b*p+w*y,m=i[8],x=i[9],b=i[10],w=i[11],t[8]=m*n+x*a+b*d+w*_,t[9]=m*r+x*c+b*u+w*v,t[10]=m*o+x*l+b*f+w*g,t[11]=m*s+x*h+b*p+w*y,m=i[12],x=i[13],b=i[14],w=i[15],t[12]=m*n+x*a+b*d+w*_,t[13]=m*r+x*c+b*u+w*v,t[14]=m*o+x*l+b*f+w*g,t[15]=m*s+x*h+b*p+w*y,t}(C(),this._mProj,this._mView),i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],h=e[8],d=e[9],u=e[10],p=e[11],_=e[12],v=e[13],g=e[14],(j=(m=i*a-n*s)*(N=u*(y=e[15])-p*g)-(x=i*c-r*s)*(L=d*y-p*v)+(b=i*l-o*s)*(S=d*g-u*v)+(w=n*c-r*a)*(A=h*y-p*_)-(k=n*l-o*a)*(M=h*g-u*_)+(E=r*l-o*c)*(T=h*v-d*_))&&(j=1/j,t[0]=(a*N-c*L+l*S)*j,t[1]=(r*L-n*N-o*S)*j,t[2]=(v*E-g*k+y*w)*j,t[3]=(u*k-d*E-p*w)*j,t[4]=(c*A-s*N-l*M)*j,t[5]=(i*N-r*A+o*M)*j,t[6]=(g*b-_*E-y*x)*j,t[7]=(h*E-u*b+p*x)*j,t[8]=(s*L-a*A+l*T)*j,t[9]=(n*A-i*L-o*T)*j,t[10]=(_*k-v*b+y*m)*j,t[11]=(d*b-h*k-p*m)*j,t[12]=(a*M-s*S-c*T)*j,t[13]=(i*S-n*M+r*T)*j,t[14]=(v*x-_*w-g*m)*j,t[15]=(h*w-d*x+u*m)*j),f(this._ray.absPos,this._position,this._transformation),function(t,e){var i=e[0],n=e[1],r=i*i+n*n;r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r}(this._ray.normal,[this._position[0],this._position[1]])}get toWorld(){return this._ray.toWorld}get absPos(){return this._ray.absPos}get normal(){return this._ray.normal}get reset(){return this._reset}set reset(t){this._reset=t}}class P{static setLight(t,e,i=[50,50,50]){var n=i,r=t.getUniformLocation(e,"uAmbientLight"),o=t.getUniformLocation(e,"uDiffuseLight"),s=t.getUniformLocation(e,"uLightPosition");t.uniform3f(r,.75,.75,.75),t.uniform3f(o,.35,.35,.35),t.uniform3f(s,n[0],n[1],n[2])}}function B(){var t=new r(9);return r!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function R(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],h=e[8],d=e[9],u=e[10],f=e[11],p=e[12],_=e[13],v=e[14],g=e[15],y=i*a-n*s,m=i*c-r*s,x=i*l-o*s,b=n*c-r*a,w=n*l-o*a,k=r*l-o*c,C=h*_-d*p,E=h*v-u*p,T=h*g-f*p,M=d*v-u*_,A=d*g-f*_,S=u*g-f*v,L=y*S-m*A+x*M+b*T-w*E+k*C;return L?(L=1/L,t[0]=(a*S-c*A+l*M)*L,t[1]=(c*T-s*S-l*E)*L,t[2]=(s*A-a*T+l*C)*L,t[3]=(r*A-n*S-o*M)*L,t[4]=(i*S-r*T+o*E)*L,t[5]=(n*T-i*A-o*C)*L,t[6]=(_*k-v*w+g*b)*L,t[7]=(v*x-p*k-g*m)*L,t[8]=(p*w-_*x+g*y)*L,t):null}class F{constructor(t,e=1,i=[.1,.2,.3],n=.1,r=[0,0,0]){this._opacity=e,this._color=i,this._selColor=[t[0]/255,t[1]/255,t[2]/255,t[3]/255];const o=n;let s,a,c=1/o,l=2*Math.PI/15,h=Math.PI/14;var d,u,f,p,_,v,g=[],y=[],m=[],x=[],b=[];for(let t=0;t<=14;++t){a=Math.PI/2-t*h,d=o*Math.cos(a),u=o*Math.sin(a);for(let t=0;t<=15;++t)s=t*l,f=d*Math.cos(s),p=d*Math.sin(s),g.push(f,p,u),y.push(f*c,p*c,u*c),m.push(this.selColor[0],this.selColor[1],this.selColor[2],this.selColor[3]),x.push(this.color[0],this.color[1],this.color[2],this.opacity)}for(let t=0;t<14;++t){v=15+(_=16*t)+1;for(let e=0;e<15;++e,++_,++v)0!=t&&b.push(_,v,_+1),13!=t&&b.push(_+1,v,v+1)}this._attributes={aColor:{size:4,offset:0,bufferData:new Float32Array(x)},aPosition:{size:3,offset:0,bufferData:new Float32Array(g)},aNormal:{size:3,offset:0,bufferData:new Float32Array(y)},aSelColor:{size:4,offset:0,bufferData:new Float32Array(m)},aColorBackup:{size:4,offset:0,bufferData:new Float32Array([])}},this._indices=new Uint8Array(b),this._state={position:r,mvp:C(),nm:B(),n:this._indices.length},this.updateMat()}readState(){this._attributes.aColorBackup=this._attributes.aColor,this._attributes.aColor=this._attributes.aSelColor}drawState(){this._attributes.aColor=this._attributes.aColorBackup}draw(e,i,n=!0){var r=e.getUniformLocation(i,"mWorld"),o=e.getUniformLocation(i,"uNormalMatrix");t.renderBuffers(e,i,this._attributes,this._indices),e.uniformMatrix4fv(r,!1,this._state.mvp),n&&e.uniformMatrix3fv(o,!1,this._state.nm),e.drawElements(e.TRIANGLES,this._state.n,e.UNSIGNED_BYTE,0)}updateMat(){M(this._state.mvp,this._state.position),R(this._state.nm,this._state.mvp)}get opacity(){return this._opacity}get color(){return this._color}get selColor(){return this._selColor}get position(){return this._state.position}set position(t){if(!t)throw new Error("error in Sphere.ts set position");this._state.position=t,this.updateMat()}set opacity(t){this._opacity=t,this._attributes.aColor.bufferData=new Float32Array([this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity])}set color(t){this._color=t;var e=[];for(let t=0;t<=14;++t)for(let t=0;t<=15;++t)e.push(this.color[0],this.color[1],this.color[2],this.opacity);this._attributes.aColor.bufferData=new Float32Array(e)}}function I(){var t=new r(4);return r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}var q,O,K,U=(q=c(),O=h(1,0,0),K=h(0,1,0),function(t,e,i){var n=y(e,i);return n<-.999999?(m(q,O,e),k(q)<1e-6&&m(q,K,e),g(q,q),function(t,e,i){i*=.5;var n=Math.sin(i);t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i)}(t,q,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(m(q,e,i),t[0]=q[0],t[1]=q[1],t[2]=q[2],t[3]=1+n,function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i*i+n*n+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=i*s,t[1]=n*s,t[2]=r*s,t[3]=o*s,t}(t,t))});I(),I(),B();class H{constructor(t,e=1,i=[.18,.1,.18],n=[0,0,0],r=[0,0,1]){this._opacity=e,this._color=i,this._selColor=[t[0]/255,t[1]/255,t[2]/255,t[3]/255];let o=0;var s,a,l,h,d,u=[],f=[],p=[],_=[],v=[];for(let t=0;t<=1;++t){s=t;for(let t=0,e=0;t<=16;++t,e+=3)o=t/16*2*Math.PI,a=Math.cos(o),l=Math.sin(o),u.push(.03*a,.03*l,s),f.push(a,l,0),p.push(this.selColor[0],this.selColor[1],this.selColor[2],this.selColor[3]),_.push(this.color[0],this.color[1],this.color[2],this.opacity)}for(let t=0;t<1;++t){d=16+(h=17*t)+1;for(let t=0;t<16;++t,++h,++d)v.push(h,h+1,d),v.push(d,h+1,d+1)}this._attributes={aColor:{size:4,offset:0,bufferData:new Float32Array(_)},aNormal:{size:3,offset:0,bufferData:new Float32Array(f)},aPosition:{size:3,offset:0,bufferData:new Float32Array(u)},aSelColor:{size:4,offset:0,bufferData:new Float32Array(p)},aColorBackup:{size:4,offset:0,bufferData:new Float32Array([])}},this._indices=new Uint8Array(v),this._state={start:n,end:r,rotQuat:I(),scale:c(),mvp:C(),nm:B(),n:this._indices.length},this.updateMat()}readState(){this._attributes.aColorBackup=this._attributes.aColor,this._attributes.aColor=this._attributes.aSelColor}drawState(){this._attributes.aColor=this._attributes.aColorBackup}draw(e,i,n=!0){var r=e.getUniformLocation(i,"mWorld"),o=e.getUniformLocation(i,"uNormalMatrix");t.renderBuffers(e,i,this._attributes,this._indices),e.uniformMatrix4fv(r,!1,this._state.mvp),n&&e.uniformMatrix3fv(o,!1,this._state.nm),e.drawElements(e.TRIANGLES,this._state.n,e.UNSIGNED_BYTE,0)}get opacity(){return this._opacity}get color(){return this._color}get selColor(){return this._selColor}get start(){return this._state.start}get end(){return this._state.end}updateMat(){f(this._state.scale,this._state.end,this._state.start),U(this._state.rotQuat,[0,0,1],g(c(),this._state.scale)),A(this._state.mvp,this._state.rotQuat,this._state.start,[1,1,l(this._state.scale)]),R(this._state.nm,this._state.mvp)}set start(t){if(!t)throw new Error("error in Cylinder.ts set start");this._state.start=t,this.updateMat()}set end(t){if(!t)throw new Error("error in Cylinder.ts set end");this._state.end=t,this.updateMat()}set opacity(t){this._opacity=t,this._attributes.aColor.bufferData=new Float32Array([this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity,this._color[0],this._color[1],this._color[2],this._opacity])}set color(t){this._color=t;var e=[];for(let t=0;t<=1;++t)for(let t=0;t<=16;++t)e.push(this.color[0],this.color[1],this.color[2],this.opacity);this._attributes.aColor.bufferData=new Float32Array(e)}}class W{constructor(){this._opacity1=.24,this._opacity2=.4,this._attributes1={aColor:{size:4,offset:0,bufferData:new Float32Array([0,0,0,this._opacity1,0,0,0,this._opacity1,0,0,0,this._opacity1,0,0,0,this._opacity1])},aNormal:{size:3,offset:0,bufferData:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1])},aPosition:{size:3,offset:0,bufferData:new Float32Array([5,5,0,5,-5,0,-5,5,0,-5,-5,0])}},this._indices1=new Uint8Array([0,1,2,1,2,3]),this._attributes2={aColor:{size:4,offset:0,bufferData:new Float32Array([0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2,0,0,0,this._opacity2])},aNormal:{size:3,offset:0,bufferData:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1])},aPosition:{size:3,offset:0,bufferData:new Float32Array([5,0,0,-5,0,0,5,.5,0,-5,.5,0,5,1,0,-5,1,0,5,1.5,0,-5,1.5,0,5,2,0,-5,2,0,5,2.5,0,-5,2.5,0,5,3,0,-5,3,0,5,3.5,0,-5,3.5,0,5,4,0,-5,4,0,5,4.5,0,-5,4.5,0,5,-.5,0,-5,-.5,0,5,-1,0,-5,-1,0,5,-1.5,0,-5,-1.5,0,5,-2,0,-5,-2,0,5,-2.5,0,-5,-2.5,0,5,-3,0,-5,-3,0,5,-3.5,0,-5,-3.5,0,5,-4,0,-5,-4,0,5,-4.5,0,-5,-4.5,0,0,5,0,0,-5,0,.5,5,0,.5,-5,0,1,5,0,1,-5,0,1.5,5,0,1.5,-5,0,2,5,0,2,-5,0,2.5,5,0,2.5,-5,0,3,5,0,3,-5,0,3.5,5,0,3.5,-5,0,4,5,0,4,-5,0,4.5,5,0,4.5,-5,0,-.5,5,0,-.5,-5,0,-1,5,0,-1,-5,0,-1.5,5,0,-1.5,-5,0,-2,5,0,-2,-5,0,-2.5,5,0,-2.5,-5,0,-3,5,0,-3,-5,0,-3.5,5,0,-3.5,-5,0,-4,5,0,-4,-5,0,-4.5,5,0,-4.5,-5,0])}},this._state={mvp:C(),nm:B(),n1:this._indices1.length,n2:76},E(this._state.mvp),this._state.nm=R(B(),this._state.mvp)}draw(e,i,n=!0){if(n){var r=e.getUniformLocation(i,"mWorld"),o=e.getUniformLocation(i,"uNormalMatrix");e.uniformMatrix4fv(r,!1,this._state.mvp),e.uniformMatrix3fv(o,!1,this._state.nm),t.renderBuffers(e,i,this._attributes1,this._indices1),e.drawElements(e.TRIANGLES,this._state.n1,e.UNSIGNED_BYTE,0),t.renderBuffers(e,i,this._attributes2),e.drawArrays(e.LINES,0,this._state.n2)}}}class G{constructor(){this._arrows=[new Y([0,0,1]),new Y([0,0,-1])],this._position=[0,0,0]}draw(t,e,i=!0){this._arrows[0].draw(t,e,i),this._arrows[1].draw(t,e,i)}set position(t){if(!t)throw new Error("error in Arrow.ts set position");this._arrows[0].position=t,this._arrows[1].position=t}}class ${constructor(){this._arrows=[new Y([1,0,0]),new Y([-1,0,0]),new Y([0,1,0]),new Y([0,-1,0])],this._position=[0,0,0]}draw(t,e,i=!0){this._arrows[0].draw(t,e,i),this._arrows[1].draw(t,e,i),this._arrows[2].draw(t,e,i),this._arrows[3].draw(t,e,i)}set position(t){if(!t)throw new Error("error in Arrow.ts set position");this._arrows[0].position=t,this._arrows[1].position=t,this._arrows[2].position=t,this._arrows[3].position=t}}class Y{constructor(t=[0,0,0]){this._state={mvp:C(),nm:B(),n:0};const e=[.3,.3,.3],i=16,n=.04,r=.08;let o=0;var s=[],a=[],l=[],h=[];const d=U(I(),[0,0,1],t);var u,f,p,_,v,y=c();for(let t=0;t<=1;++t){u=.2*t+.2;for(let t=0,r=0;t<=i;++t,r+=3)o=t/i*2*Math.PI,x(y,[n*(f=Math.cos(o)),n*(p=Math.sin(o)),u],d),s.push(y[0],y[1],y[2]),x(y,[f,p,0],d),a.push(y[0],y[1],y[2]),l.push(e[0],e[1],e[2],.3)}for(let t=0;t<1;++t){v=(_=17*t)+i+1;for(let t=0;t<i;++t,++_,++v)h.push(_,_+1,v),h.push(v,_+1,v+1)}for(let t=0;t<=1;++t){u=.4;for(let c=0,h=0;c<=i;++c,h+=3)o=c/i*2*Math.PI,f=Math.cos(o),p=Math.sin(o),x(y,0==t?[n*f,n*p,u]:[r*f,r*p,u],d),s.push(y[0],y[1],y[2]),x(y,[0,0,-1],d),a.push(y[0],y[1],y[2]),l.push(e[0],e[1],e[2],.3)}for(let t=2;t<3;++t){v=(_=17*t)+i+1;for(let t=0;t<i;++t,++_,++v)h.push(_,_+1,v),h.push(v,_+1,v+1)}for(let t=0;t<=1;++t){u=.2*t+.2+.2;for(let n=0,c=0;n<=i;++n,c+=3)o=n/i*2*Math.PI,f=Math.cos(o),p=Math.sin(o),x(y,0==t?[r*f,r*p,u]:[0,0,u],d),s.push(y[0],y[1],y[2]),x(y,[.2*f,.2*p,r],d),g(y,y),a.push(y[0],y[1],y[2]),l.push(e[0],e[1],e[2],.3)}for(let t=4;t<5;++t){v=(_=17*t)+i+1;for(let t=0;t<i;++t,++_,++v)h.push(_,_+1,v),h.push(v,_+1,v+1)}this._attributes={aColor:{size:4,offset:0,bufferData:new Float32Array(l)},aNormal:{size:3,offset:0,bufferData:new Float32Array(a)},aPosition:{size:3,offset:0,bufferData:new Float32Array(s)}},this._indices=new Uint8Array(h),this._state.n=this._indices.length,E(this._state.mvp),R(this._state.nm,this._state.mvp)}draw(e,i,n=!0){if(n){var r=e.getUniformLocation(i,"mWorld"),o=e.getUniformLocation(i,"uNormalMatrix");t.renderBuffers(e,i,this._attributes,this._indices),e.uniformMatrix4fv(r,!1,this._state.mvp),e.uniformMatrix3fv(o,!1,this._state.nm),e.drawElements(e.TRIANGLES,this._state.n,e.UNSIGNED_BYTE,0)}}set position(t){M(this._state.mvp,t),R(this._state.nm,this._state.mvp)}}class X{constructor(){this._opacity=.8,this._color=[.2,.2,.2];var t=[],e=[],i=[];for(let n=0;n<=25;++n)t.push(0,0,.2*n),e.push(0,0,0),i.push(this._color[0],this._color[1],this._color[2],this._opacity);this._attributes={aColor:{size:4,offset:0,bufferData:new Float32Array(i)},aNormal:{size:3,offset:0,bufferData:new Float32Array(e)},aPosition:{size:3,offset:0,bufferData:new Float32Array(t)}},this._state={position:[0,0,0],length:0,mvp:C(),n:0}}draw(e,i,n=!0){if(n){var r=e.getUniformLocation(i,"mWorld");t.renderBuffers(e,i,this._attributes),e.uniformMatrix4fv(r,!1,this._state.mvp),e.drawArrays(e.LINES,0,this._state.n)}}set position(t){if(!t)throw new Error("error in Cylinder.ts set start");var e,i;this._state.position[0]=t[0],this._state.position[1]=t[1],this._state.length=t[2],e=this._state.mvp,i=[1,1,Math.sign(this._state.length)],e[0]=i[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=i[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,T(this._state.mvp,this._state.mvp,this._state.position),this._state.n=Math.floor(Math.abs(this._state.length)/.2+1.5),this._state.n-=this._state.n%2}}class V{constructor(){this._nodeStack=new Q,this._edgeStack=new Q,this._nodeNum=0,this._edgeNum=0,this._isKnot=!1,this._nodeArr=[],this._transform_z=!1,this._selected=null,this._xyPlane=new W,this._planeArrows=new $,this._verticalArrows=new G,this._guide=new X,this._overlapNode=null,this._drawingTool=new tt(this),this._drawingTool.initCallback()}deleteData(){this._nodeStack=new Q,this._edgeStack=new Q,this._nodeNum=0,this._edgeNum=0,this._isKnot=!1,this._nodeArr=[],this._selected=null,this._drawingTool.reset()}insert(){var t=[0,0,0];this.selectedNode&&(t=this.selected.object.position,this._overlapNode=this.selected);const e=this._nodeStack.available(),i=new Z([e,0,0,255],t);if(e>255)throw new Error("Can only have at most 255 Nodes");this._nodeStack.insert(i,e),this.nodeNum++,this._isKnot=!1,this.selected=i}connect(t,e){const i=this._edgeStack.available();if(i>255)throw new Error("Can only have at most 255 Edges");var n;if(t.curNext||e.prevCur)if(t.prevCur||e.curNext)if(t.curNext||e.curNext){if(t.prevCur||e.prevCur)throw new Error("Nodes can only have 2 edges");V.reverse(t),n=new J(t,e,[0,i,1,255])}else V.reverse(e),n=new J(t,e,[0,i,1,255]);else n=new J(e,t,[0,i,1,255]);else n=new J(t,e,[0,i,1,255]);this._edgeStack.insert(n,i),this.edgeNum++,this.checkKnot()}subdivide(){if(this.selected instanceof J){const t=this.selected.startNode,e=this.selected.endNode,i=p(c(),u(c(),e.object.position,t.object.position),.5);this.delete(),this.insert(),this.selected.object.position=i,this.connect(this.selected,e),this.connect(t,this.selected),this._verticalArrows.position=this.selected.object.position,this._planeArrows.position=this.selected.object.position}}connected(t,e){return t.next instanceof Z&&(t.next===e.next||t.next===e.prev)||t.prev instanceof Z&&(t.prev===e.next||t.prev===e.prev)}delete(t=this.selected){t instanceof Z?(this._nodeStack.delete(t),this.nodeNum--,t.prevCur&&(this._edgeStack.delete(t.prevCur),this.edgeNum--),t.curNext&&(this._edgeStack.delete(t.curNext),this.edgeNum--),t.delete()):t instanceof J&&(t.delete(),this._edgeStack.delete(t),this.edgeNum--),this.selected=null,this.checkKnot()}static reverse(t){var e,i,n,r=t;if(t.next)do{n=r,r=r.next,null===(e=n.curNext)||void 0===e||e.reverse(),n.reverse()}while(r);else if(t.prev)do{n=r,r=r.prev,null===(i=n.prevCur)||void 0===i||i.reverse(),n.reverse()}while(r)}checkKnot(){if(this.nodeNum==this.edgeNum&&this.nodeNum>2){var t=null;for(let e=0;e<this._nodeStack.data.length;e++)if(null!==this._nodeStack.data[e]){t=this._nodeStack.data[e];break}var e=null==t?void 0:t.next;for(let i=1;i<this.nodeNum;i++){if(!e)return void(this._isKnot=!1);if(t===e)return void(this._isKnot=!1);e=e.next}this._isKnot=!0}else this._isKnot=!1}draw(t,e,i){var n;for(let r=0;r<this._nodeStack.data.length;r++)(n=this._nodeStack.data[r])&&n.object.draw(t,e,i);for(let r=0;r<this._edgeStack.data.length;r++)(n=this._edgeStack.data[r])&&n.object.draw(t,e,i);i&&(t.enable(t.BLEND),t.depthMask(!1),this._xyPlane.draw(t,e,!0),this.selectedNode&&(this.transform_z?this._verticalArrows.draw(t,e,!0):this._planeArrows.draw(t,e,!0),this._guide.draw(t,e,!0)),t.disable(t.BLEND),t.depthMask(!0))}get isEmpty(){return 0==this.nodeNum&&0==this.edgeNum}get isKnot(){return this._isKnot}get nodeArr(){var t=null;for(let e=0;e<this._nodeStack.data.length;e++)if(null!==this._nodeStack.data[e]){t=this._nodeStack.data[e];break}var e=null==t?void 0:t.next;this._nodeArr=[],this._nodeArr.push(t.object.position);for(let i=1;i<this.nodeNum;i++){if(!e)throw this._isKnot=!1,new Error("not a knot");if(this._nodeArr.push(e.object.position),t===e)return void(this._isKnot=!1);e=e.next}return this._nodeArr}get selectedNode(){return this.selected instanceof Z}get selected(){return this._selected}set selected(t){this.selected&&(this.selected.object.color=f(c(),this.selected.object.color,[.18,.18,.18])),this._selected=t,this.selected&&(this.selected.object.color=u(c(),this.selected.object.color,[.18,.18,.18]),this.selectedNode&&(this._verticalArrows.position=this.selected.object.position,this._planeArrows.position=this.selected.object.position,this._guide.position=this.selected.object.position))}get drawingTool(){return this._drawingTool}get nodeNum(){return this._nodeNum}set nodeNum(t){this._nodeNum=t}get edgeNum(){return this._edgeNum}set edgeNum(t){this._edgeNum=t}get transform_z(){return this._transform_z}set transform_z(t){this._transform_z=t}setDrawState(t){t?(this._nodeStack.data.forEach((function(t){t&&t.object.drawState()})),this._edgeStack.data.forEach((function(t){t&&t.object.drawState()}))):(this._nodeStack.data.forEach((function(t){t&&t.object.readState()})),this._edgeStack.data.forEach((function(t){t&&t.object.readState()})))}btnManager(){if(this.drawingTool.insert)this._overlapNode&&this.selected instanceof Z&&(this.delete(),this.selected=this._overlapNode),this.insert(),this.drawingTool.insert=!0;else if(this.drawingTool.connectFirst){this._overlapNode&&this.selected instanceof Z&&(this.delete(),this.selected=this._overlapNode);const t=this.selected;this.insert(),this.connect(t,this.selected),this.drawingTool.connectFirst=!1}else if(this.drawingTool.connectLast&&this.selected instanceof Z){var t=null;if(this._overlapNode&&(this.selected.prev?t=this.selected.prev:this.selected.next&&(t=this.selected.next),this.delete(),this.selected=this._overlapNode,this.connect(t,this.selected),this.selected.next&&this.selected.prev))return void(this.drawingTool.connectLast=!1);t=this.selected,this.insert(),this.connect(t,this.selected)}}moveNode(t,e,i){var n,r;if(this.selected instanceof Z){var o=c();d(o,this.selected.object.position);const s=f(c(),e,this.selected.object.position);if(this.transform_z){const n=L(i,[s[0],s[1]]);o[2]=t[2]*(-n/L([t[0],t[1]],i))+e[2],o[2]=Math.max(-5,Math.min(5,o[2]))}else{const i=-s[2]/t[2];o[0]=t[0]*i+e[0],o[1]=t[1]*i+e[1],o[0]=Math.max(-5,Math.min(5,o[0])),o[1]=Math.max(-5,Math.min(5,o[1]))}this.selected.object.position=o,(this.drawingTool.insert||this.drawingTool.connectLast)&&(this.overlapping(g(c(),t),e),this._overlapNode&&(this.selected.object.position=this._overlapNode.object.position)),null===(n=this.selected.prevCur)||void 0===n||n.updatePos(),null===(r=this.selected.curNext)||void 0===r||r.updatePos(),this._verticalArrows.position=this.selected.object.position,this._planeArrows.position=this.selected.object.position,this._guide.position=this.selected.object.position}}overlapping(t,e){var i,n,r;if(this.selected instanceof Z)for(let o=0;o<this._nodeStack.data.length;o++)if(i=this._nodeStack.data[o]){if(i===this.selected||i===this.selected.prev||i===this.selected.next||this.connected(i,this.selected))continue;if((!i.prevCur||!i.curNext)&&(n=v(e,i.object.position),r=u(c(),p(c(),t,n),e),v(i.object.position,r)<.25))return void(this._overlapNode=i)}this._overlapNode=null}pickObj(t){t=t.map((function(t){return t/255}));var e=null;this._nodeStack.data.forEach((function(i){i&&t.every((function(t,e){return t===i.object.selColor[e]}))&&(e=i)})),this._edgeStack.data.forEach((function(i){i&&t.every((function(t,e){return t===i.object.selColor[e]}))&&(e=i)})),this.selected=e,this._overlapNode=null,this.drawingTool.erase?(this.delete(),this.isKnot&&(this.drawingTool.erase=!1)):this.drawingTool.subdivide&&(this.subdivide(),this.drawingTool.subdivide=!1)}}class Q{constructor(){this._data=[]}insert(t,e){e<this._data.length?this._data[e]=t:this._data.push(t)}free(t){this._data[t]=null}delete(t){for(let e=0;e<this._data.length;e++)this._data[e]===t&&(this._data[e]=null)}available(){for(let t=0;t<this._data.length;t++)if(!this._data[t])return t;return this._data.length}get data(){return this._data}}class J{constructor(t,e,i){this._startNode=t,this._endNode=e,this._startNode.curNext=this,this._startNode.next=this._endNode,this._endNode.prevCur=this,this._endNode.prev=this._startNode,this._object=new H(i,1,[.4,.4,.4],this._startNode.object.position,this._endNode.object.position)}delete(){this._startNode.next=null,this._endNode.prev=null,this._startNode.curNext=null,this._endNode.prevCur=null}updatePos(){this.object.start=this._startNode.object.position,this.object.end=this._endNode.object.position}reverse(){const t=this._startNode;this._startNode=this._endNode,this._endNode=t}get object(){return this._object}get startNode(){return this._startNode}set startNode(t){this._startNode=t}get endNode(){return this._endNode}set endNode(t){this._endNode=t}}class Z{constructor(t,e=h(0,0,0),i=null,n=null){this._object=new F(t,1,p(c(),[42,106,209],1/255),.1,e),this._prev=i,this._next=n,this._curNext=null,this._prevCur=null}delete(){var t,e;null===(t=this._prevCur)||void 0===t||t.delete(),null===(e=this._curNext)||void 0===e||e.delete()}reverse(){const t=this._next;this._next=this._prev,this._prev=t;const e=this._curNext;this._curNext=this._prevCur,this._prevCur=e}get object(){return this._object}get next(){return this._next}get prev(){return this._prev}get prevCur(){return this._prevCur}get curNext(){return this._curNext}set next(t){this._next=t}set prev(t){this._prev=t}set prevCur(t){this._prevCur=t}set curNext(t){this._curNext=t}}class tt{constructor(t){this._linkedKnot=t,this._overlay=document.getElementById("drawing tool"),this._insertBtn=document.getElementById("insert button"),this._connectBtn=document.getElementById("connect button"),this._subdivideBtn=document.getElementById("subdivide button"),this._eraseBtn=document.getElementById("erase button"),this._insert=!1,this._connectFirst=!1,this._connectLast=!1,this._subdivide=!1,this._erase=!1}initCallback(){this._overlay.addEventListener("mousedown",(t=>{this.resize(t)})),this._insertBtn.addEventListener("click",(()=>{this.insertBtnResponse()})),this._connectBtn.addEventListener("click",(()=>{this.connectBtnResponse()})),this._eraseBtn.addEventListener("click",(()=>{this.eraseBtnResponse()})),this._subdivideBtn.addEventListener("click",(()=>{this.subdivideBtnResponse()}))}reset(){this.insert=!1,this.connectLast=!1,this.subdivide=!1,this.erase=!1}insertBtnResponse(){if(this.linkedKnot.nodeNum>254)throw new Error("cannot have more than 255 nodes");if(this.insert=!this.insert,this.insert){if(this.linkedKnot.transform_z=!1,this.connectFirst)return void(this.connectLast=!1);this.connectLast&&this.linkedKnot.delete(),this.linkedKnot.insert()}else this.linkedKnot.delete();this.erase=!1,this.connectLast=!1,this.subdivide=!1}connectBtnResponse(){if(this.linkedKnot.nodeNum>254)throw new Error("cannot have more than 255 nodes");this.connectLast=!this.connectLast,this.connectLast?(this.linkedKnot.transform_z=!1,this.insert||this.linkedKnot.insert()):this.linkedKnot.delete(),this.insert=!1,this.erase=!1,this.subdivide=!1}eraseBtnResponse(){this.erase=!this.erase,this.erase&&((this.connectLast||this.insert)&&this.linkedKnot.delete(),this.linkedKnot.selected=null),this.insert=!1,this.connectLast=!1,this.subdivide=!1}subdivideBtnResponse(){this.subdivide=!this.subdivide,this.subdivide&&((this.connectLast||this.insert)&&this.linkedKnot.delete(),this.linkedKnot.selected=null),this.insert=!1,this.connectLast=!1,this.erase=!1}get insert(){return this._insert}set insert(t){this._insert=t,this._insertBtn.classList.toggle("active",t)}set connectLast(t){this._connectLast=t,this._connectFirst=t,this._connectBtn.classList.toggle("active",t)}set connectFirst(t){this._connectFirst=t}get connectLast(){return this._connectLast}get connectFirst(){return this._connectFirst}get subdivide(){return this._subdivide}set subdivide(t){this._subdivide=t,this._subdivideBtn.classList.toggle("active",t)}set erase(t){this._erase=t,this._eraseBtn.classList.toggle("active",t)}get erase(){return this._erase}get linkedKnot(){return this._linkedKnot}Disable(t){this.insert=!1,this.connectLast=!1,this.subdivide=!1,this.erase=!1,!0===t?this._overlay.classList.toggle("hidden",!0):this._overlay.classList.toggle("hidden",!1)}resize(t){t.offsetY>=75&&t.offsetX<240&&t.offsetX>160&&("translate(0px, -80%)"===this._overlay.style.transform?this._overlay.style.transform="translate(0px, -0%)":this._overlay.style.transform="translate(0px, -80%)")}}const et=Math.PI;function it(t){return Math.cos(t)}function nt(t){return Math.sin(t)}class rt{constructor(){this._cosCoef=[],this._sinCoef=[],this._color=[50,105,205],p(this._color,this._color,1/255),this._opacity=1,this._attributes={aColor:{size:4,offset:0,bufferData:new Float32Array},aNormal:{size:3,offset:0,bufferData:new Float32Array},aPosition:{size:3,offset:0,bufferData:new Float32Array}},this._indices=new Uint16Array,this._state={mvp:C(),nm:B(),n:0},this._calculated=!1,this._intersecting=!0}deleteData(){this._calculated=!1,this._intersecting=!0}calcFourier(t){var e,i,n=[],r=[],o=t.length,s=0,a=[0,0,0];for(let n=0;n<o;n++){s+=v(e=t[n],i=0==n?t[o-1]:t[n-1]);for(let i=0;i<o;i++){let n=f(c(),e,t[i]);Math.abs(n[0])>a[0]&&(a[0]=Math.abs(n[0])),Math.abs(n[1])>a[1]&&(a[1]=Math.abs(n[1])),Math.abs(n[2])>a[2]&&(a[2]=Math.abs(n[2]))}}const h=10/Math.max(a[0],a[1],a[2]);var x,w=c(),k=c(),T=0,M=c(),A=c();for(let a=1;a<=6;a++){let l=c(),d=c();b(l),b(d);for(let n=0;n<o;n++)x=T,T+=v(e=t[n],i=0==n?t[o-1]:t[n-1]),g(w,f(c(),e,i)),_(k,i,w,-x),u(M,u(c(),p(c(),k,2*et*a*nt(2*et*a*T/s)),p(c(),w,2*et*a*T*nt(2*et*a*T/s))),p(c(),w,s*it(2*et*a*T/s))),u(A,u(c(),p(c(),k,2*et*a*nt(2*et*a*x/s)),p(c(),w,2*et*a*x*nt(2*et*a*x/s))),p(c(),w,s*it(2*et*a*x/s))),_(l,l,f(c(),M,A),1/(2*et*et*a*a)),u(M,u(c(),p(c(),k,-2*et*a*it(2*et*a*T/s)),p(c(),w,-2*et*a*T*it(2*et*a*T/s))),p(c(),w,s*nt(2*et*a*T/s))),u(A,u(c(),p(c(),k,-2*et*a*it(2*et*a*x/s)),p(c(),w,-2*et*a*x*it(2*et*a*x/s))),p(c(),w,s*nt(2*et*a*x/s))),_(d,d,f(c(),M,A),1/(2*et*et*a*a));p(l,l,h),p(d,d,h),n.push(l),r.push(d)}this._cosCoef=n,this._sinCoef=r,this._calculated=!1;const S=1200;var L,N,j,z,D,P=[],F=[],I=[],q=[],O=c(),K=c(),U=[0,0,1];for(let t=0;t<=S;t++){g(L=f(c(),this.knot(t/S),this.knot((t+1)/S)),L),l(N=f(c(),U,p(c(),L,y(U,L))))<1e-6&&l(N=f(c(),[0,1,0],p(c(),L,y([0,1,0],L))))<1e-5&&(N=[1,0,0],N=f(c(),N,p(c(),L,y(N,L)))),g(N,N),g(j=m(c(),N,L),j),U=N;for(let e=0;e<=12;e++){const i=e/12*2*Math.PI;u(O,p(c(),N,it(i)),p(c(),j,nt(i))),d(K,O),p(O,O,.025),u(O,O,this.knot(t/S)),P.push(O[0],O[1],O[2]),F.push(K[0],K[1],K[2]),I.push(this._color[0],this._color[1],this._color[2],this._opacity)}}for(let t=0;t<S;++t){D=13+(z=13*t);for(let t=0;t<12;++t,++z,++D)q.push(z,z+1,D),q.push(D,z+1,D+1)}this._attributes.aColor.bufferData=new Float32Array(I),this._attributes.aNormal.bufferData=new Float32Array(F),this._attributes.aPosition.bufferData=new Float32Array(P),this._indices=new Uint16Array(q),this._state.mvp=E(C()),this._state.nm=R(B(),this._state.mvp),this._state.n=this._indices.length,this._intersecting=!0,this._calculated=!0,this.checkIntersection()}knot(t){const e=2*t*et;return u(c(),_(c(),_(c(),_(c(),_(c(),_(c(),p(c(),this._cosCoef[5],it(6*e)),this._cosCoef[4],it(5*e)),this._cosCoef[3],it(4*e)),this._cosCoef[2],it(3*e)),this._cosCoef[1],it(2*e)),this._cosCoef[0],it(e)),_(c(),_(c(),_(c(),_(c(),_(c(),p(c(),this._sinCoef[5],nt(6*e)),this._sinCoef[4],nt(5*e)),this._sinCoef[3],nt(4*e)),this._sinCoef[2],nt(3*e)),this._sinCoef[1],nt(2*e)),this._sinCoef[0],nt(e)))}draw(e,i,n=!0){if(n){var r=e.getUniformLocation(i,"mWorld"),o=e.getUniformLocation(i,"uNormalMatrix");t.renderBuffers(e,i,this._attributes,this._indices),e.uniformMatrix4fv(r,!1,this._state.mvp),e.uniformMatrix3fv(o,!1,this._state.nm),e.drawElements(e.TRIANGLES,this._state.n,e.UNSIGNED_SHORT,0)}}exportKI(){var t=[];for(let e=0;e<6;e++)t.push(this._cosCoef[e][0],this._cosCoef[e][1],this._cosCoef[e][2],0);for(let e=0;e<6;e++)t.push(this._sinCoef[e][0],this._sinCoef[e][1],this._sinCoef[e][2],0);return new Float32Array(t)}exportKIArr(){var t=[],e=[],i=[],n=[];for(let r=0;r<this._cosCoef.length;r++)t.push(p(c(),this._sinCoef[r],r+1)),e.push(p(c(),this._cosCoef[r],-(r+1))),i.push(p(c(),this._cosCoef[r],-(r+1)*(r+1))),n.push(p(c(),this._sinCoef[r],-(r+1)*(r+1)));return[this._cosCoef,this._sinCoef,t,e,i,n]}checkIntersection(){const t=2400;for(let e=0;e<t;e++)for(let i=e+Math.round(48);i<Math.floor(2304);i++)if(w(this.knot(e/t),this.knot(i/t))<.05)return;this._intersecting=!1}get intersecting(){return this._intersecting}get calculated(){return this._calculated}}class ot{constructor(t=1,e=[.5,.5,.5]){this._opacity=1,this._color=p(c(),e,1/255),this._state={center:[0,0,0],normal:[0,0,1],radius:t,mvp:C(),nm:B(),n:0};var i=Math.max(Math.min(Math.round(60*Math.sqrt(this._state.radius)),500),50),n=this._state.radius,r=[],o=[],s=[],a=[];for(let t=0;t<=10;++t){const e=t/10*2*Math.PI,a=Math.cos(e),c=Math.sin(e),l=n+.012*a;for(let t=0;t<=i;++t){const e=t/i*2*Math.PI,n=Math.cos(e),h=Math.sin(e),d=l*n,u=l*h,f=.012*c;r.push(d,u,f),o.push(n*a,h*a,c),s.push(this._color[0],this._color[1],this._color[2],this._opacity)}}const l=i+1;var h,d;for(let t=0;t<10;++t){d=(h=t*l)+l;for(let t=0;t<i;++t,++h,++d)a.push(h,h+1,d),a.push(h+1,d+1,d)}this._attributes={aColor:{size:4,offset:0,bufferData:new Float32Array(s)},aNormal:{size:3,offset:0,bufferData:new Float32Array(o)},aPosition:{size:3,offset:0,bufferData:new Float32Array(r)}},this._indices=new Uint16Array(a),this._state.n=this._indices.length,E(this._state.mvp),R(this._state.nm,this._state.mvp)}setCenterNormalRad(t,e,i){var n;n=i/this._state.radius,A(this._state.mvp,U(I(),[0,0,1],e),t,[n,n,n]),R(this._state.nm,this._state.mvp)}draw(e,i,n=!0){if(n){var r=e.getUniformLocation(i,"mWorld"),o=e.getUniformLocation(i,"uNormalMatrix");t.renderBuffers(e,i,this._attributes,this._indices),e.uniformMatrix4fv(r,!1,this._state.mvp),e.uniformMatrix3fv(o,!1,this._state.nm),e.drawElements(e.TRIANGLES,this._state.n,e.UNSIGNED_SHORT,0)}}}class st{constructor(){this._loader=document.getElementById("loader"),this._text=document.getElementById("loader text"),this._quit=document.getElementById("quit"),this._doubleCheck={overlay:document.getElementById("double check"),confirm:document.getElementById("confirm"),cancel:document.getElementById("cancel")},this._cancel=!1}initCallback(){this._quit.addEventListener("click",(()=>{this.quitBtnResponse()})),this._doubleCheck.confirm.addEventListener("click",(()=>{this.confirmBtnResponse()})),this._doubleCheck.cancel.addEventListener("click",(()=>{this.cancelBtnResponse()}))}quitBtnResponse(){this._doubleCheck.overlay.classList.toggle("hidden",!1)}confirmBtnResponse(){this._doubleCheck.overlay.classList.toggle("hidden",!0),this._cancel=!0}cancelBtnResponse(){this._doubleCheck.overlay.classList.toggle("hidden",!0),this._cancel=!1}load(t){this.text="",this._loader.classList.toggle("hidden",!t),this._doubleCheck.overlay.classList.toggle("hidden",!0),this._cancel=!1}set text(t){this._text.textContent=t}get cancel(){return this._cancel}}class at{constructor(t,e=0,i="/%s"){this._resetValue=e,this._value=e,this._textTemp=i;const n=document.getElementById(t);this._button=n.querySelector(".dropbtn"),this._button.addEventListener("focus",(()=>{this._overlay.classList.toggle("hidden",!1)})),this._button.addEventListener("blur",(()=>{this._overlay.classList.toggle("hidden",!0)})),this._overlay=n.querySelector(".content");const r=n.querySelectorAll(".element");this._element=[];for(let t=0;t<r.length;t++){let e=r[t];this._element.push(e),e.addEventListener("mousedown",(()=>{this.value=Number(e.getAttribute("value")),this._overlay.classList.toggle("hidden",!0),this._button.textContent=e.textContent}))}this.reset()}reset(){this.value=this._resetValue,this._overlay.classList.toggle("hidden",!0)}set value(t){t=t||this._resetValue,this._value=t}get value(){return this._value}}var ct=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const lt=1200,ht=Math.PI;function dt(t){return Math.cos(t)}function ut(t){return Math.sin(t)}class ft{constructor(){this._bufferSize=897750,this._calc={error_field:1e-7,ACPolyAve:0},this._cosCoef=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],this._sinCoef=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],this._dcosCoef=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],this._dsinCoef=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],this._d2cosCoef=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],this._d2sinCoef=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],this._frames=new Array(lt),this._calculated=!1,this._player=new mt,this._player.initCallback()}deleteData(){this._player.reset(),this._frames=new Array(lt),this.calculated=!1}Initialize(){return ct(this,void 0,void 0,(function*(){if(!navigator.gpu)throw new Error("WebGPU not supported.");if(this._adapter=yield navigator.gpu.requestAdapter(),!this._adapter)throw new Error("Couldn't request WebGPU adapter.");this._device=yield this._adapter.requestDevice(),this._bindGroupLayout=this._device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]});const t=this._device.createShaderModule({code:"\r\n\r\n\r\nstruct fourier_series {\r\n    cos : array<vec3f, 6>,\r\n    sin : array<vec3f, 6>,\r\n};\r\n\r\n\r\n@group(0) @binding(0)var<uniform> knot_info: fourier_series;\r\n@group(0) @binding(1)var<storage, read> tlist: array<f32>;\r\n@group(0) @binding(2)var<storage, read_write> output: array<f32>;\r\n\r\n\r\nconst PI : f32 = 3.1415926535897932384626433832795;\r\nconst error_field : f32 = 0.0025;\r\nconst grad_stop_double : f32 = 0.000001;\r\nconst ptol_stop_double : f32 = 0.0005;\r\n\r\nconst MAX_ITER : i32 = 250;\r\noverride BUFFER_SIZE : u32 = 5985 * 100;\r\n\r\nvar<workgroup> t_i : array<array<f32, 5>, 16>;\r\n\r\nvar<workgroup> abort : array<bool, 16>;\r\n\r\nvar<workgroup> vv : array<array<vec3f, 16>, 16>;\r\nvar<workgroup> nv : array<array<f32, 16>, 16>;\r\nvar<workgroup> dv : array<array<vec3f, 4>, 16>;\r\nvar<workgroup> d2v : array<array<vec3f, 4>, 16>;\r\n\r\nvar<workgroup> ptol : array<f32, 16>;\r\nvar<workgroup> grad : array<array<f32, 4>, 16>;\r\nvar<workgroup> hess : array<array<f32, 16>, 16>;\r\n\r\n\r\nvar<workgroup> diff : array<array<f32, 4>, 16>;\r\nvar<workgroup> backtrack : array<array<u32, 16>, 16>;\r\n\r\n\r\nfn set_variables(x_index : u32, z_index : u32){\r\n\r\n    for(var i : u32 = 0; i<4; i++){\r\n        vv[z_index][x_index + 4*i] = (\r\n            knotc(t_i[z_index][x_index + 1]) \r\n            - knotc(t_i[z_index][i])\r\n        );\r\n    }\r\n\r\n    vv[z_index][9] = -vv[z_index][11];\r\n    vv[z_index][14] = -vv[z_index][15];\r\n\r\n    for(var i : u32 = 0; i<4; i++){\r\n        nv[z_index][x_index + 4*i] = length(vv[z_index][x_index + 4*i]);\r\n    }\r\n\r\n\r\n    if(\r\n        (nv[z_index][0] < error_field) ||\r\n        (nv[z_index][1] < error_field) ||\r\n        (nv[z_index][2] < error_field) ||\r\n        (nv[z_index][3] < error_field) ||\r\n        (nv[z_index][5] < error_field) ||\r\n        (nv[z_index][6] < error_field) ||\r\n        (nv[z_index][10] < error_field) ||\r\n        (nv[z_index][11] < error_field) ||\r\n        (nv[z_index][15] < error_field)){\r\n        abort[z_index] = true;\r\n    }\r\n\r\n\r\n    ptol[z_index] = nv[z_index][2]*nv[z_index][5]+nv[z_index][6]*nv[z_index][1]-nv[z_index][0]*nv[z_index][10] \r\n                    +nv[z_index][2]*nv[z_index][11]+nv[z_index][1]*nv[z_index][15]-nv[z_index][3]*nv[z_index][10];\r\n\r\n\r\n    dv[z_index][x_index] = knotd(t_i[z_index][x_index + 1]);\r\n    d2v[z_index][x_index] = knotd2(t_i[z_index][x_index + 1]);\r\n\r\n}\r\n    \r\nfn grad_compute(x : u32, z_index : u32){\r\n\r\n    var sgn : array<f32, 3>;\r\n\r\n    var index1 : array<u32, 3>;\r\n    var index2 : array<u32, 3>;\r\n\r\n    let dvv : vec3f = dv[z_index][x];\r\n\r\n    index2[0] = 1;\r\n\r\n    switch x {\r\n        case 0: {\r\n            index1[0] = 10;   index1[1] = 2;   index1[2] = 1;\r\n            index2[0] = 0;   index2[1] = 8;   index2[2] = 12;\r\n            sgn[0] = f32(-1);   sgn[1] = f32(1);   sgn[2] = f32(1);\r\n\r\n        }\r\n        case 1: {\r\n            index1[0] = 6;   index1[1] = 0;   index1[2] = 2;\r\n            index2[0] = 1;   index2[1] = 13;   index2[2] = 5;\r\n            sgn[0] = f32(1);   sgn[1] = f32(-1);   sgn[2] = f32(1);\r\n\r\n        }\r\n        case 2: {\r\n            index1[0] = 5;   index1[1] = 1;   index1[2] = 0;\r\n            index2[0] = 2;   index2[1] = 6;   index2[2] = 10;\r\n            sgn[0] = f32(1);   sgn[1] = f32(1);   sgn[2] = f32(-1);\r\n\r\n        }\r\n        default {\r\n            sgn[0] = f32(0);   sgn[1] = f32(0);   sgn[2] = f32(0);\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    let dptol1423 : f32= (\r\n        sgn[0]*(nv[z_index][index1[0]]/nv[z_index][index2[0]])*dot(vv[z_index][index2[0]],dvv) \r\n        + sgn[1]*(nv[z_index][index1[1]]/nv[z_index][index2[1]])*dot(vv[z_index][index2[1]],dvv)\r\n        + sgn[2]*(nv[z_index][index1[2]]/nv[z_index][index2[2]])*dot(vv[z_index][index2[2]],dvv)\r\n    );\r\n\r\n    switch x {\r\n        case 1: {\r\n            index1[0] = 3;   index1[1] = 2;   index1[2] = 15;\r\n            index2[0] = 13;   index2[1] = 9;   index2[2] = 1;\r\n            sgn[0] = f32(-1);   sgn[1] = f32(1);   sgn[2] = f32(1);\r\n\r\n        }\r\n        case 2: {\r\n            index1[0] = 1;   index1[1] = 3;   index1[2] = 11;\r\n            index2[0] = 14;   index2[1] = 10;   index2[2] = 2;\r\n            sgn[0] = f32(1);   sgn[1] = f32(-1);   sgn[2] = f32(1);\r\n\r\n        }\r\n        case 3: {\r\n            index1[0] = 2;   index1[1] = 1;   index1[2] = 10;\r\n            index2[0] = 11;   index2[1] = 15;   index2[2] = 3;\r\n            sgn[0] = f32(1);   sgn[1] = f32(1);   sgn[2] = f32(-1);\r\n\r\n        }\r\n        default {\r\n            sgn[0] = f32(0);   sgn[1] = f32(0);   sgn[2] = f32(0);\r\n        }\r\n    }\r\n\r\n\r\n    let dptol1453 : f32 = (\r\n        sgn[0]*(nv[z_index][index1[0]]/nv[z_index][index2[0]])*dot(vv[z_index][index2[0]],dvv) \r\n        + sgn[1]*(nv[z_index][index1[1]]/nv[z_index][index2[1]])*dot(vv[z_index][index2[1]],dvv)\r\n        + sgn[2]*(nv[z_index][index1[2]]/nv[z_index][index2[2]])*dot(vv[z_index][index2[2]],dvv)\r\n    );\r\n\r\n\r\n    grad[z_index][x] = dptol1423 + dptol1453;\r\n\r\n}\r\n\r\nfn hess_compute(x : u32, z_index : u32){\r\n\r\n    var sgn : array<f32, 3>;\r\n    \r\n    var index1 : array<u32, 2>;\r\n    var index2 : array<u32, 2>;\r\n    var index3 : array<u32, 2>;\r\n\r\n    let dvv : vec3f = dv[z_index][x];\r\n    let dvdv : f32 = dot(dvv,dvv);\r\n    let d2vv : vec3f = d2v[z_index][x];\r\n    \r\n    index1[1] = 1;\r\n\r\n\r\n    switch x {\r\n        case 0: {\r\n            index1[0] = 10;     index1[1] = 0;\r\n            index2[0] = 2;      index2[1] = 8;      \r\n            index3[0] = 1;      index3[1] = 12;\r\n            sgn[0] = f32(-1);   sgn[1] = f32(1);   sgn[2] = f32(1);\r\n\r\n        }\r\n        case 1: {\r\n            index1[0] = 6;     index1[1] = 1;\r\n            index2[0] = 0;      index2[1] = 13;      \r\n            index3[0] = 2;      index3[1] = 5;\r\n            sgn[0] = f32(1);   sgn[1] = f32(-1);   sgn[2] = f32(1);\r\n\r\n        }\r\n        case 2: {\r\n            index1[0] = 5;     index1[1] = 2;\r\n            index2[0] = 1;      index2[1] = 6;      \r\n            index3[0] = 0;      index3[1] = 10;\r\n            sgn[0] = f32(1);   sgn[1] = f32(1);   sgn[2] = f32(-1);\r\n\r\n        }\r\n        default {\r\n            sgn[0] = f32(0);   sgn[1] = f32(0);   sgn[2] = f32(0);\r\n        }\r\n    }\r\n    \r\n\r\n    let d2ptol1423_diag : f32 = (\r\n        sgn[0]*(nv[z_index][index1[0]]/nv[z_index][index1[1]])*(dot(vv[z_index][index1[1]],d2vv) + dvdv - pow(dot(vv[z_index][index1[1]],dvv), f32(2))/(pow(nv[z_index][index1[1]], f32(2))))\r\n        + sgn[1]*(nv[z_index][index2[0]]/nv[z_index][index2[1]])*(dot(vv[z_index][index2[1]],d2vv) + dvdv - pow(dot(vv[z_index][index2[1]],dvv), f32(2))/(pow(nv[z_index][index2[1]], f32(2))))\r\n        + sgn[2]*(nv[z_index][index3[0]]/nv[z_index][index3[1]])*(dot(vv[z_index][index3[1]],d2vv) + dvdv - pow(dot(vv[z_index][index3[1]],dvv), f32(2))/(pow(nv[z_index][index3[1]], f32(2))))\r\n    );\r\n\r\n    switch x {\r\n        case 1: {\r\n            index1[0] = 3;     index1[1] = 13;\r\n            index2[0] = 2;      index2[1] = 9;      \r\n            index3[0] = 15;      index3[1] = 1;\r\n            sgn[0] = f32(-1);   sgn[1] = f32(1);   sgn[2] = f32(1);\r\n\r\n        }\r\n        case 2: {\r\n            index1[0] = 1;     index1[1] = 14;\r\n            index2[0] = 3;      index2[1] = 10;      \r\n            index3[0] = 11;      index3[1] = 2;\r\n            sgn[0] = f32(1);   sgn[1] = f32(-1);   sgn[2] = f32(1);\r\n\r\n        }\r\n        case 3: {\r\n            index1[0] = 2;     index1[1] = 11;\r\n            index2[0] = 1;      index2[1] = 15;      \r\n            index3[0] = 10;      index3[1] = 3;\r\n            sgn[0] = f32(1);   sgn[1] = f32(1);   sgn[2] = f32(-1);\r\n\r\n        }\r\n        default {\r\n            sgn[0] = f32(0);   sgn[1] = f32(0);   sgn[2] = f32(0);\r\n        }\r\n    }\r\n    \r\n\r\n    let d2ptol1453_diag : f32 = (\r\n        sgn[0]*(nv[z_index][index1[0]]/nv[z_index][index1[1]])*(dot(vv[z_index][index1[1]],d2vv) + dvdv - pow(dot(vv[z_index][index1[1]],dvv), f32(2))/(pow(nv[z_index][index1[1]], f32(2))))\r\n        + sgn[1]*(nv[z_index][index2[0]]/nv[z_index][index2[1]])*(dot(vv[z_index][index2[1]],d2vv) + dvdv - pow(dot(vv[z_index][index2[1]],dvv), f32(2))/(pow(nv[z_index][index2[1]], f32(2))))\r\n        + sgn[2]*(nv[z_index][index3[0]]/nv[z_index][index3[1]])*(dot(vv[z_index][index3[1]],d2vv) + dvdv - pow(dot(vv[z_index][index3[1]],dvv), f32(2))/(pow(nv[z_index][index3[1]], f32(2))))\r\n    );\r\n\r\n    hess[z_index][x + 4*x] = d2ptol1423_diag + d2ptol1453_diag;\r\n\r\n    \r\n    var xindex : u32 = 1;\r\n    var yindex : u32 = 1;\r\n\r\n\r\n\r\n    switch x {\r\n        case 1: {\r\n            // block index 1\r\n            index1[0] = 2;    index1[1] = 5;\r\n            index2[0] = 10;    index2[1] = 0;    \r\n            index3[0] = 1;    index3[1] = 6;  \r\n            xindex = 1;\r\n            yindex = 0;\r\n            sgn[0] = f32(-1);   sgn[1] = f32(1);   sgn[2] = f32(-1);        \r\n\r\n        }\r\n        case 2: {\r\n            // block index 2\r\n            index1[0] = 1;    index1[1] = 6;\r\n            index2[0] = 10;    index2[1] = 0;    \r\n            index3[0] = 2;    index3[1] = 5;    \r\n            xindex = 2;\r\n            yindex = 0;\r\n            sgn[0] = f32(-1);   sgn[1] = f32(-1);   sgn[2] = f32(-1);        \r\n\r\n        }\r\n        case 3: {\r\n            // block index 6\r\n            index1[0] = 0;    index1[1] = 10;\r\n            index2[0] = 6;    index2[1] = 1;    \r\n            index3[0] = 2;    index3[1] = 5;    \r\n            xindex = 2;\r\n            yindex = 1;\r\n            sgn[0] = f32(1);   sgn[1] = f32(1);   sgn[2] = f32(1);        \r\n\r\n        }\r\n        default {\r\n            sgn[0] = f32(0);   sgn[1] = f32(0);   sgn[2] = f32(0);\r\n        }\r\n    }\r\n    \r\n\r\n    let d2ptol1423_non_diag : f32 = (\r\n        sgn[0]*(nv[z_index][index1[0]]/nv[z_index][index1[1]])*(dot(dv[z_index][xindex],dv[z_index][yindex]) - dot(vv[z_index][index1[1]],dv[z_index][xindex])*dot(vv[z_index][index1[1]],dv[z_index][yindex])/(nv[z_index][index1[1]]*nv[z_index][index1[1]]))\r\n        + sgn[1]/(nv[z_index][index2[0]]*nv[z_index][index2[1]])*dot(vv[z_index][index2[0]],dv[z_index][xindex])*dot(vv[z_index][index2[1]],dv[z_index][yindex])\r\n        + sgn[2]/(nv[z_index][index3[0]]*nv[z_index][index3[1]])*dot(vv[z_index][index3[0]],dv[z_index][xindex])*dot(vv[z_index][index3[1]],dv[z_index][yindex])\r\n    );\r\n\r\n\r\n\r\n    switch x {\r\n        case 3: {\r\n            // block index 6\r\n            index1[0] = 3;    index1[1] = 10;\r\n            index2[0] = 2;    index2[1] = 11;    \r\n            index3[0] = 15;    index3[1] = 1;   \r\n            xindex = 2;\r\n            yindex = 1; \r\n            sgn[0] = f32(1);   sgn[1] = f32(-1);   sgn[2] = f32(-1);        \r\n\r\n        }\r\n        case 2: {\r\n            // block index 7\r\n            index1[0] = 2;    index1[1] = 11;\r\n            index2[0] = 3;    index2[1] = 10;    \r\n            index3[0] = 15;    index3[1] = 1;    \r\n            xindex = 3;\r\n            yindex = 1;\r\n            sgn[0] = f32(-1);   sgn[1] = f32(1);   sgn[2] = f32(1);        \r\n\r\n        }\r\n        case 1: {\r\n            // block index 11\r\n            index1[0] = 1;    index1[1] = 15;\r\n            index2[0] = 3;    index2[1] = 10;    \r\n            index3[0] = 11;    index3[1] = 2;   \r\n            xindex = 3;\r\n            yindex = 2; \r\n            sgn[0] = f32(-1);   sgn[1] = f32(-1);   sgn[2] = f32(1);        \r\n\r\n        }\r\n        default {\r\n            sgn[0] = f32(0);   sgn[1] = f32(0);   sgn[2] = f32(0);\r\n        }\r\n    }\r\n    \r\n\r\n    let d2ptol1453_non_diag : f32 = (\r\n        sgn[0]*(nv[z_index][index1[0]]/nv[z_index][index1[1]])*(dot(dv[z_index][xindex],dv[z_index][yindex]) - dot(vv[z_index][index1[1]],dv[z_index][xindex])*dot(vv[z_index][index1[1]],dv[z_index][yindex])/(nv[z_index][index1[1]]*nv[z_index][index1[1]]))\r\n        + sgn[1]/(nv[z_index][index2[0]]*nv[z_index][index2[1]])*dot(vv[z_index][index2[0]],dv[z_index][xindex])*dot(vv[z_index][index2[1]],dv[z_index][yindex])\r\n        + sgn[2]/(nv[z_index][index3[0]]*nv[z_index][index3[1]])*dot(vv[z_index][index3[0]],dv[z_index][xindex])*dot(vv[z_index][index3[1]],dv[z_index][yindex])\r\n    );\r\n\r\n\r\n    switch x {\r\n        case 3: {\r\n            hess[z_index][6] = d2ptol1423_non_diag + d2ptol1453_non_diag;\r\n            hess[z_index][9] = hess[z_index][6];\r\n        }\r\n        case 2: {\r\n            hess[z_index][2] = d2ptol1423_non_diag;\r\n            hess[z_index][7] = d2ptol1453_non_diag;\r\n            hess[z_index][8] = hess[z_index][2];\r\n            hess[z_index][13] = hess[z_index][7];\r\n\r\n        }\r\n        case 1: {\r\n            hess[z_index][1] = d2ptol1423_non_diag;\r\n            hess[z_index][11] = d2ptol1453_non_diag;\r\n            hess[z_index][4] = hess[z_index][1];\r\n            hess[z_index][14] = hess[z_index][11];\r\n\r\n        }\r\n        default {\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n@compute @workgroup_size(4,16)\r\nfn main(\r\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\r\n    @builtin(local_invocation_id) local_invocation_id : vec3<u32>,\r\n    @builtin(global_invocation_id) global_invocation_id : vec3<u32>,\r\n    @builtin(local_invocation_index) local_invocation_index: u32,\r\n    @builtin(num_workgroups) num_workgroups: vec3<u32>\r\n) {\r\n\r\n    \r\n\r\n    let workgroup_index = (\r\n        workgroup_id.x +\r\n        workgroup_id.y * num_workgroups.x +\r\n        workgroup_id.z * num_workgroups.x * num_workgroups.y\r\n    );\r\n    \r\n    let newton_index = (\r\n        workgroup_index * 16 +\r\n        local_invocation_id.y\r\n    );\r\n    \r\n\r\n\r\n    let global_invocation_index = (\r\n        workgroup_index * 64 +\r\n        local_invocation_index\r\n    );\r\n\r\n\r\n    let tlist_index = (\r\n        newton_index*5\r\n    );\r\n\r\n\r\n\r\n        // Avoid accessing the buffer out of bounds\r\n    if (tlist_index >= BUFFER_SIZE) {\r\n        return;\r\n    }\r\n\r\n    var grad_length: f32;\r\n\r\n    var i : u32;\r\n    var grad_dot_diff: f32;\r\n    var func: f32;\r\n    var min_backtrack : u32;\r\n\r\n    var x_n : array<f32, 5>;\r\n\r\n    let c : f32 = 0.0001;\r\n    const rho : f32 = 0.65;\r\n\tvar alpha : f32 = pow(rho, f32(4*local_invocation_id.x));\r\n\t\r\n\r\n    t_i[local_invocation_id.y][0] = tlist[tlist_index];\r\n    t_i[local_invocation_id.y][1] = tlist[tlist_index + 1];\r\n    t_i[local_invocation_id.y][2] = tlist[tlist_index + 2];\r\n    t_i[local_invocation_id.y][3] = tlist[tlist_index + 3];\r\n    t_i[local_invocation_id.y][4] = tlist[tlist_index + 4];\r\n\r\n\r\n    var iter : i32;\r\n\r\n    output[tlist_index] = 1.0;\r\n\r\n\r\n    for(iter = 0; iter< MAX_ITER; iter++){\r\n\r\n        set_variables(local_invocation_id.x, local_invocation_id.y);\r\n\r\n        if(abort[local_invocation_id.y] == true){\r\n            return;\r\n        }\r\n\r\n\r\n\r\n        grad_compute(local_invocation_id.x, local_invocation_id.y);\r\n        hess_compute(local_invocation_id.x, local_invocation_id.y);\r\n\r\n        \r\n        grad_length = sqrt(\r\n            pow(grad[local_invocation_id.y][0], 2.0) \r\n            + pow(grad[local_invocation_id.y][1], 2.0)\r\n            + pow(grad[local_invocation_id.y][2], 2.0)\r\n            + pow(grad[local_invocation_id.y][3], 2.0)\r\n        );\r\n\r\n\r\n        if((grad_length < grad_stop_double) || (ptol[local_invocation_id.y] <= ptol_stop_double)){\r\n            if(ptol[local_invocation_id.y] > ptol_stop_double){\r\n                return;\r\n            }\r\n\r\n\r\n            if(check_order(t_i[local_invocation_id.y])){\r\n\r\n                if(check_pentagon(t_i[local_invocation_id.y])){\r\n\r\n                    if(local_invocation_id.x == 0){\r\n                        output[tlist_index] = t_i[local_invocation_id.y][0];\r\n                        output[tlist_index + 1] = t_i[local_invocation_id.y][1];\r\n                        output[tlist_index + 2] = t_i[local_invocation_id.y][2];\r\n                        output[tlist_index + 3] = t_i[local_invocation_id.y][3];\r\n                        output[tlist_index + 4] = t_i[local_invocation_id.y][4];\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n\r\n            var tmp : f32 = t_i[local_invocation_id.y][1];\r\n\r\n            t_i[local_invocation_id.y][1] = t_i[local_invocation_id.y][4];\r\n            t_i[local_invocation_id.y][4] = tmp;\r\n            tmp = t_i[local_invocation_id.y][2];\r\n            t_i[local_invocation_id.y][2] = t_i[local_invocation_id.y][3];\r\n            t_i[local_invocation_id.y][3] = tmp;\r\n\r\n            if(check_order(t_i[local_invocation_id.y])){\r\n\r\n                if(check_pentagon(t_i[local_invocation_id.y])){\r\n\r\n                    if(local_invocation_id.x == 0){\r\n                        output[tlist_index] = t_i[local_invocation_id.y][0];\r\n                        output[tlist_index + 1] = t_i[local_invocation_id.y][1];\r\n                        output[tlist_index + 2] = t_i[local_invocation_id.y][2];\r\n                        output[tlist_index + 3] = t_i[local_invocation_id.y][3];\r\n                        output[tlist_index + 4] = t_i[local_invocation_id.y][4];\r\n                    }\r\n            \r\n                }\r\n            }\r\n\r\n            return;\r\n\r\n        }\r\n\r\n\r\n\r\n        modified_Cholesky(local_invocation_id.y);\r\n\r\n\r\n        grad_dot_diff = (\r\n            grad[local_invocation_id.y][0] * diff[local_invocation_id.y][0]\r\n            + grad[local_invocation_id.y][1] * diff[local_invocation_id.y][1]\r\n            + grad[local_invocation_id.y][2] * diff[local_invocation_id.y][2]\r\n            + grad[local_invocation_id.y][3] * diff[local_invocation_id.y][3]\r\n        );\r\n\r\n\r\n        for (i = 0; i < 4; i++)\r\n        {\r\n\r\n            x_n[0] = t_i[local_invocation_id.y][0];\r\n            x_n[1] = t_i[local_invocation_id.y][1] - alpha*diff[local_invocation_id.y][0];\r\n            x_n[2] = t_i[local_invocation_id.y][2] - alpha*diff[local_invocation_id.y][1];\r\n            x_n[3] = t_i[local_invocation_id.y][3] - alpha*diff[local_invocation_id.y][2];\r\n            x_n[4] = t_i[local_invocation_id.y][4] - alpha*diff[local_invocation_id.y][3];\r\n\r\n            func = (\r\n                length(knotc(x_n[0]) - knotc(x_n[3])) * length(knotc(x_n[1]) - knotc(x_n[2]))\r\n                + length(knotc(x_n[1]) - knotc(x_n[3])) * length(knotc(x_n[0]) - knotc(x_n[2]))\r\n                - length(knotc(x_n[0]) - knotc(x_n[1])) * length(knotc(x_n[2]) - knotc(x_n[3]))\r\n                \r\n                + length(knotc(x_n[0]) - knotc(x_n[3])) * length(knotc(x_n[2]) - knotc(x_n[4]))\r\n                + length(knotc(x_n[0]) - knotc(x_n[2])) * length(knotc(x_n[3]) - knotc(x_n[4]))\r\n                - length(knotc(x_n[0]) - knotc(x_n[4])) * length(knotc(x_n[2]) - knotc(x_n[3]))\r\n            );\r\n\r\n            if(func <= (ptol[local_invocation_id.y] - c*alpha*grad_dot_diff)){\r\n                backtrack[local_invocation_id.y][4*local_invocation_id.x + i] = 4*local_invocation_id.x + i;\r\n            } else {\r\n                backtrack[local_invocation_id.y][4*local_invocation_id.x + i] = 15;\r\n            }\r\n\r\n            alpha = alpha * rho;\r\n\r\n        }\r\n\r\n\r\n\r\n        min_backtrack = 15;\r\n\r\n        if(local_invocation_id.x == 0){\r\n\r\n            for (i = 0; i < 16; i++)\r\n            {\r\n                if(backtrack[local_invocation_id.y][i] < min_backtrack){\r\n                    min_backtrack = backtrack[local_invocation_id.y][i];\r\n                }\r\n            }\r\n\r\n            alpha = pow(rho, f32(min_backtrack));\r\n\r\n            t_i[local_invocation_id.y][1] = t_i[local_invocation_id.y][1] - alpha*diff[local_invocation_id.y][0];\r\n            t_i[local_invocation_id.y][2] = t_i[local_invocation_id.y][2] - alpha*diff[local_invocation_id.y][1];\r\n            t_i[local_invocation_id.y][3] = t_i[local_invocation_id.y][3] - alpha*diff[local_invocation_id.y][2];\r\n            t_i[local_invocation_id.y][4] = t_i[local_invocation_id.y][4] - alpha*diff[local_invocation_id.y][3];\r\n        }\r\n        \r\n\r\n        t_i[local_invocation_id.y][local_invocation_id.x + 1] = fract(t_i[local_invocation_id.y][local_invocation_id.x + 1]);\r\n\r\n        proxim(local_invocation_id.x, local_invocation_id.y, error_field);\r\n\r\n        if(abort[local_invocation_id.y] == true){\r\n            return;\r\n        }\r\n\r\n        iter ++;\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nfn check_order(t_i : array<f32, 5>) -> bool{\r\n    if(\r\n        (t_i[0] < t_i[1])\r\n        && (t_i[1] < t_i[2])\r\n        && (t_i[2] < t_i[3])\r\n        && (t_i[3] < t_i[4])\r\n    ){\r\n        return true;\r\n    }else if(\r\n        (t_i[4] < t_i[0])\r\n        && (t_i[0] < t_i[1])\r\n        && (t_i[1] < t_i[2])\r\n        && (t_i[2] < t_i[3])\r\n    ){\r\n        return true;\r\n    }else if(\r\n        (t_i[3] < t_i[4])\r\n        && (t_i[4] < t_i[0])\r\n        && (t_i[0] < t_i[1])\r\n        && (t_i[1] < t_i[2])\r\n    ){\r\n        return true;\r\n    }else if(\r\n        (t_i[2] < t_i[3])\r\n        && (t_i[3] < t_i[4])\r\n        && (t_i[4] < t_i[0])\r\n        && (t_i[0] < t_i[1])\r\n    ){\r\n        return true;\r\n    }else if(\r\n        (t_i[1] < t_i[2])\r\n        && (t_i[2] < t_i[3])\r\n        && (t_i[3] < t_i[4])\r\n        && (t_i[4] < t_i[0])\r\n    ){\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfn proxim(x : u32, y : u32, proxim_float : f32){\r\n    for(var i = i32(x) + 1; i < 5; i++){\r\n        let t_diff = t_i[y][i] - t_i[y][x];\r\n\r\n        if((abs(t_diff) < proxim_float)\r\n            || (abs(t_diff + 1.0) < proxim_float)\r\n            || (abs(1.0 - t_diff) < proxim_float))\r\n        {\r\n            abort[y] = true;\r\n            return;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfn modified_Cholesky(z: u32) {\r\n\r\n    var max_diag : f32 = 0.0;\r\n    var max_nondiag : f32 = 0.0;\r\n\r\n\r\n    for (var i = 0; i < 4; i++)\r\n    {\r\n        if(abs(hess[z][i*4+i]) > max_diag){\r\n            max_diag = abs(hess[z][i*4+i]);\r\n        }\r\n        for(var j =i+1; j < 4; j++){\r\n            if(abs(hess[z][i*4+j]) > max_nondiag){\r\n                max_nondiag = abs(hess[z][i*4+j]);\r\n            }\r\n        }\r\n    }\r\n\r\n    var beta2 : f32 = max(max(max_diag, max_nondiag/(sqrt(f32(15)))), 0.0001);\r\n\r\n    var temp : array<f32, 16>;\r\n    var D : array<f32, 4>;\r\n    var L : array<f32, 16>;\r\n\r\n    var theta : array<f32, 4>;\r\n\r\n    for(var j =0; j<4; j++){\r\n        temp[j*4 + j] = hess[z][j*4 + j];\r\n        for(var s = 0; s< j; s++){\r\n            temp[j*4 + j] -= D[s]*L[j*4 + s]*L[j*4 + s];\r\n        }\r\n        \r\n        for(var i=j+1; i<4; i++){\r\n            temp[i*4 + j] = hess[z][i*4 + j];\r\n            for(var s = 0; s< j; s++){\r\n                temp[i*4 + j] -= D[s]*L[i*4 + s]*L[j*4 + s];\r\n            }\r\n\r\n            if(theta[j]< abs(temp[i*4 + j])){\r\n                theta[j]= abs(temp[i*4 + j]);\r\n            }\r\n        }\r\n\r\n        D[j] = max(max(abs(temp[j*4 + j]), theta[j]*theta[j]/beta2), 0.001);\r\n        \r\n        for(var i=j+1; i<4; i++){\r\n            L[i*4 + j] = temp[i*4 + j]/D[j];\r\n        }\r\n        L[j*4 + j] = 1.0;\r\n    }\r\n\r\n    // forward substitution.\r\n    var y : array<f32, 4>;\r\n    var sum : f32;\r\n\r\n    for (var i = 0; i < 4; i++)\r\n    {\r\n        sum = grad[z][i];\r\n        for (var j = 0; j < i; j++){\r\n            sum -= L[i*4+j] * y[j];\r\n        }\r\n        y[i] = sum / L[i*4 +i];\r\n    }\r\n\r\n\r\n    // back substitution.\r\n    // var retval = new Array(4);\r\n\r\n    for (var k = 3; k >= 0; k--)\r\n    {\r\n        sum = y[k];\r\n        for (var j = k + 1; j < 4; j++){\r\n            sum -= L[j*4+k] * diff[z][j] * D[k];\r\n        }\r\n        diff[z][k] = sum/(D[k]);\r\n    }\r\n\r\n}\r\n\r\n\r\nfn check_pentagon(t_i : array<f32, 5>) -> bool {\r\n\r\n    let v1 = knotc(t_i[0]);\r\n    let v2 = knotc(t_i[3]);\r\n    let v3 = knotc(t_i[1]);\r\n    let v4 = knotc(t_i[4]);\r\n    let v5 = knotc(t_i[2]);\r\n\r\n    let v12 = (v2-v1);\r\n    let v23 = (v3-v2);\r\n    let v34 = (v4-v3);\r\n    let v45 = (v5-v4);\r\n    let v51 = (v1-v5);\r\n\r\n    var sum_angle : f32 = 0.0;\r\n\r\n    sum_angle += acos(-1*dot(v12,v23)/(length(v12)*length(v23)));\r\n    sum_angle += acos(-1*dot(v23,v34)/(length(v23)*length(v34)));\r\n    sum_angle += acos(-1*dot(v34,v45)/(length(v34)*length(v45)));\r\n    sum_angle += acos(-1*dot(v45,v51)/(length(v45)*length(v51)));\r\n    sum_angle += acos(-1*dot(v51,v12)/(length(v51)*length(v12)));\r\n\r\n    if(abs(sum_angle - 3*PI) < 0.02){\r\n        return true;\r\n    }\r\n    return false;\r\n\r\n\r\n}\r\n\r\n\r\n\r\nfn knotc(param : f32) -> vec3f {\r\n    let t : f32 = 2 * PI * param;\r\n    let ret : vec3f = (\r\n        knot_info.cos[0] * cos(t) + knot_info.cos[1] * cos(2*t) + knot_info.cos[2] * cos(3*t) + knot_info.cos[3] * cos(4*t) + knot_info.cos[4] * cos(5*t) + knot_info.cos[5] * cos(6*t)\r\n        + knot_info.sin[0] * sin(t) + knot_info.sin[1] * sin(2*t) + knot_info.sin[2] * sin(3*t) + knot_info.sin[3] * sin(4*t) + knot_info.sin[4] * sin(5*t)+ knot_info.sin[5] * sin(6*t)\r\n    );\r\n\treturn ret;\r\n}\r\nfn knotd(param : f32) -> vec3f {\r\n    let t : f32 = 2 * PI * param;\r\n    let ret : vec3f = (\r\n        knot_info.sin[0] * cos(t) + knot_info.sin[1] *2* cos(2*t) + knot_info.sin[2] *3* cos(3*t) + knot_info.sin[3] *4* cos(4*t) + knot_info.sin[4] *5* cos(5*t)+ knot_info.sin[5] *6* cos(6*t)\r\n        - knot_info.cos[0] * sin(t) - knot_info.cos[1] *2* sin(2*t) - knot_info.cos[2] *3* sin(3*t) - knot_info.cos[3] *4* sin(4*t) - knot_info.cos[4] *5* sin(5*t)- knot_info.cos[5] *6* sin(6*t)\r\n    );\r\n\treturn 2*PI*ret;\r\n}\r\nfn knotd2(param : f32) -> vec3f {\r\n    let t : f32 = 2 * PI * param;\r\n    let ret : vec3f = (\r\n        knot_info.cos[0] * cos(t) + knot_info.cos[1] *4* cos(2*t) + knot_info.cos[2] *9* cos(3*t) + knot_info.cos[3] *16* cos(4*t) + knot_info.cos[4] *25* cos(5*t)+ knot_info.cos[5] *36* cos(6*t)\r\n        + knot_info.sin[0] * sin(t) + knot_info.sin[1] *4* sin(2*t) + knot_info.sin[2] *9* sin(3*t) + knot_info.sin[3] *16* sin(4*t) + knot_info.sin[4] *25* sin(5*t)+ knot_info.sin[5] *36* sin(6*t)\r\n    );\r\n\treturn -4*PI*PI*ret;\r\n}\r\n\r\n"});this._computePipeline=this._device.createComputePipeline({layout:this._device.createPipelineLayout({bindGroupLayouts:[this._bindGroupLayout]}),compute:{module:t,entryPoint:"main",constants:{BUFFER_SIZE:this._bufferSize}}})}))}initKnot(t){this._cosCoef=t[0],this._sinCoef=t[1],this._dcosCoef=t[2],this._dsinCoef=t[3],this._d2cosCoef=t[4],this._d2sinCoef=t[5]}get calculated(){return this._calculated}set calculated(t){this._calculated=t}findCircles(t,e,i,n,r){return ct(this,void 0,void 0,(function*(){var o,s,a,c;r.text=(0).toFixed(1)+" %";var l=new Array(lt);for(let t=0;t<lt;t++)l[t]=[];for(let e=0;e<40;e++){const[,i]=this.sett_i(30,30*e),n=this._device.createCommandEncoder(),u=n.beginComputePass();o=this._device.createBuffer({size:48*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this._device.queue.writeBuffer(o,0,t),s=this._device.createBuffer({size:this._bufferSize*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),a=this._device.createBuffer({size:this._bufferSize*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),c=this._device.createBuffer({size:this._bufferSize*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this._device.queue.writeBuffer(s,0,i);const f=this._device.createBindGroup({layout:this._bindGroupLayout,entries:[{binding:0,resource:{buffer:o}},{binding:1,resource:{buffer:s}},{binding:2,resource:{buffer:a}}]});u.setPipeline(this._computePipeline),u.setBindGroup(0,f),u.dispatchWorkgroups(200,200),u.end(),n.copyBufferToBuffer(a,0,c,0,this._bufferSize*Float32Array.BYTES_PER_ELEMENT),this._device.queue.submit([n.finish()]),yield c.mapAsync(GPUMapMode.READ,0,this._bufferSize*Float32Array.BYTES_PER_ELEMENT);var h=new Float32Array(c.getMappedRange(0,this._bufferSize*Float32Array.BYTES_PER_ELEMENT).slice(0));for(let t=0;t<h.length/5;t++)if(1!=h[5*t]){var d=Math.round(h[5*t]*lt);d>=lt||d<0||l[d].push([h[5*t],h[5*t+1],h[5*t+2],h[5*t+3],h[5*t+4]])}if(r.text=(100*e/40).toFixed(1)+" %",r.cancel)return}var u=new Array(2);u[0]=[],u[1]=[];for(let t=0;t<lt;t++)if(l[t]=this.removeDupe(l[t],.01),l[t]=l[t].slice(0,2*n),l[t]=this.c5_ptolemy(l[t]),l[t]=this.removeDupe(l[t],.001),l[t]=l[t].slice(0,n),this._calc.ACPolyAve+=l[t].length%2,u[l[t].length%2].push(t),r.cancel)return;if(this._calc.ACPolyAve=Math.round(this._calc.ACPolyAve/lt),e){var f,p;r.text="verifying number of circles",u[(this._calc.ACPolyAve+1)%2]=u[(this._calc.ACPolyAve+1)%2].slice(0,i);for(let t=0;t<u[(this._calc.ACPolyAve+1)%2].length;t++){p=[];let e=(f=u[(this._calc.ACPolyAve+1)%2][t])-1,i=f+1;e<0&&(e=1199),i>=lt&&(i=0);for(let t=0;t<l[e];t++){let i=l[e][t];p.push([f/lt,i[1],i[2],i[3],i[4]])}for(let t=0;t<l[i];t++){let e=l[i][t];p.push([f/lt,e[1],e[2],e[3],e[4]])}for(let t=0;t<l[f];t++){let e=l[f][t];p.push([f/lt,e[1],e[2],e[3],e[4]])}if(p=this.removeDupe(p,.001),p=this.c5_ptolemy(p),l[f]=this.removeDupe(p,.001),r.cancel)return}}r.text="creating buffers",this._calculated=!1,this.setFrameData(l,r),r.cancel||(this._calculated=!0,this._player.play=!0)}))}removeDupe(t,e){let i=[];for(var n=0;n<t.length;n++){var r=!0;let s=i.length;for(var o=0;o<s;o++)Math.sqrt(Math.pow(t[n][1]-i[o][1],2)+Math.pow(t[n][2]-i[o][2],2)+Math.pow(t[n][3]-i[o][3],2)+Math.pow(t[n][4]-i[o][4],2))<e&&(r=!1);r&&i.push(t[n])}return i}sett_i(t,e=0){var i,n,r,o,s,a=0;const c=22,l=new Float32Array(5985*t*5);for(a=0,s=0;s<t;s++)for(i=1;i<c;i++)for(n=i+1;n<c;n++)for(r=n+1;r<c;r++)for(o=r+1;o<c;o++)l[a]=e/lt+s/lt,l[a+1]=i/c+l[a],l[a+2]=n/c+l[a],l[a+3]=r/c+l[a],l[a+4]=o/c+l[a],a+=5;return[a,l]}setFrameData(t,e){var i,n,r,o=new F([0,0,0,0],1,[1,0,0],.08),s=new Array(30);for(let t=0;t<30;t++)s[t]={count:0,objs:[]};var a={count:0,objs:[]};for(let d=0;d<lt;d++){this._frames[d]={redPoints:{position:this.knot(d/lt),obj:o},blackPoints:[],circles:[]};for(let t=0;t<30;t++)s[t].count=0;a.count=0;var c=[],l=t[d];for(let t=0;t<l.length;t++){var h=[!0,!0,!0,!0];i=[l[t][5],l[t][6],l[t][7]],n=[l[t][8],l[t][9],l[t][10]],r=l[t][11];let e=Math.max(0,Math.min(Math.floor(2*Math.log2(r))+4,29));s[e].objs.length==s[e].count&&s[e].objs.push(new ot(Math.pow(2,(e-4)/2),[65,40,80])),this._frames[d].circles.push({center:i,normal:n,radius:r,obj:s[e].objs[s[e].count]}),s[e].count++;for(let e=0;e<c.length;e++)w(c[e].position,this.knot(l[t][1]))<.001&&(h[0]=!1),w(c[e].position,this.knot(l[t][2]))<.001&&(h[1]=!1),w(c[e].position,this.knot(l[t][3]))<.001&&(h[2]=!1),w(c[e].position,this.knot(l[t][4]))<.001&&(h[3]=!1);h[0]&&(a.count==a.objs.length&&a.objs.push(new F([0,0,0,0],1,[.2,.2,.2],.06)),c.push({position:this.knot(l[t][1]),obj:a.objs[a.count]}),a.count++),h[1]&&(a.count==a.objs.length&&a.objs.push(new F([0,0,0,0],1,[.2,.2,.2],.06)),c.push({position:this.knot(l[t][2]),obj:a.objs[a.count]}),a.count++),h[2]&&(a.count==a.objs.length&&a.objs.push(new F([0,0,0,0],1,[.2,.2,.2],.06)),c.push({position:this.knot(l[t][3]),obj:a.objs[a.count]}),a.count++),h[3]&&(a.count==a.objs.length&&a.objs.push(new F([0,0,0,0],1,[.2,.2,.2],.06)),c.push({position:this.knot(l[t][4]),obj:a.objs[a.count]}),a.count++)}if(this._frames[d].blackPoints=c,e.cancel)return}}draw(t,e,i=!0){var n,r,o,s;if(i){var a,c,l=this._frames[this._player.frame];for(let i=0;i<l.circles.length;i++)null===(n=(a=l.circles[i]).obj)||void 0===n||n.setCenterNormalRad(a.center,a.normal,a.radius),null===(r=a.obj)||void 0===r||r.draw(t,e,!0);for(let i=0;i<l.blackPoints.length;i++)(c=l.blackPoints[i]).obj.position=c.position,null===(o=c.obj)||void 0===o||o.draw(t,e,!0);(c=l.redPoints).obj.position=c.position,null===(s=c.obj)||void 0===s||s.draw(t,e,!0),this._player.play&&(this._player.frame+=this._player.speed)}}get player(){return this._player}toCVR(t,e,i){const n=pt(t,e),r=pt(e,i),o=pt(i,t);var s,a,c=(a=r,[(s=n)[1]*a[2]-s[2]*a[1],s[2]*a[0]-s[0]*a[2],s[0]*a[1]-s[1]*a[0]]);const l=vt(n)*vt(r)*vt(o)*.5/vt(c),h=vt(r)*vt(r)*yt(n,o)*-.5/yt(c,c),d=vt(o)*vt(o)*yt(n,r)*-.5/yt(c,c),u=vt(n)*vt(n)*yt(o,r)*-.5/yt(c,c),f=_t(_t(gt(h,t),gt(d,e)),gt(u,i));return c=function(t){const e=vt(t);return[t[0]/e,t[1]/e,t[2]/e]}(c),[f,c,l]}decim(t){for(var e=1;e<5;e++)t[e]%=1,t[e]<0&&(t[e]+=1)}proxim(t,e){for(var i=0;i<5;i++)for(var n=i+1;n<5;n++)if(Math.abs(t[i]-t[n])<e||Math.abs(t[i]-t[n]+1)<e||Math.abs(t[n]-t[i]+1)<e)return!0;return!1}modified_Cholesky(t,e){if(16!=t.length||4!=e.length)throw new Error("dimension error in modified_Cholesky");var i,n,r,o,s=0,a=0;for(i=0;i<4;i++)for(Math.abs(t[4*i+i])>s&&(s=Math.abs(t[4*i+i])),n=0;n<4;n++)Math.abs(t[4*i+n])>a&&n!=i&&(a=Math.abs(t[4*i+n]));var c=Math.max(s,a/Math.sqrt(15),1e-4),l=new Array(16),h=new Array(4),d=new Array(16),u=[0,0,0,0];for(n=0;n<4;n++){for(l[4*n+n]=t[4*n+n],o=0;o<n;o++)l[4*n+n]-=h[o]*d[4*n+o]*d[4*n+o];for(i=n+1;i<4;i++){for(l[4*i+n]=t[4*i+n],o=0;o<n;o++)l[4*i+n]-=h[o]*d[4*i+o]*d[4*n+o];u[n]<Math.abs(l[4*i+n])&&(u[n]=Math.abs(l[4*i+n]))}for(h[n]=Math.max(Math.abs(l[4*n+n]),u[n]*u[n]/c,.001),i=n+1;i<4;i++)d[4*i+n]=l[4*i+n]/h[n];d[4*n+n]=1}var f,p=new Array(4);for(i=0;i<4;i++){for(f=e[i],n=0;n<i;n++)f-=d[4*i+n]*p[n];p[i]=f/d[4*i+i]}var _=[0,0,0,0];for(r=3;r>=0;r--){for(f=p[r],n=r+1;n<4;n++)f-=d[4*n+r]*_[n]*h[r];_[r]=f/h[r]}return _}gradient_ptolemy(t,e,i){const n=-t[2]/t[4]*e[1]+-t[1]/t[5]*e[2]-t[7]/t[0]*e[0],r=t[2]/t[4]*e[5]+t[5]/t[1]*e[4]- -t[0]/t[7]*e[6],o=t[4]/t[2]*e[8]+t[1]/t[5]*e[9]-t[0]/t[7]*e[10],s=t[8]/t[0]*e[0]+-t[1]/t[6]*e[3]- -t[3]/t[4]*e[1],a=-t[0]/t[8]*e[7]+t[6]/t[1]*e[4]-t[3]/t[4]*e[5],c=t[0]/t[8]*e[13]+t[1]/t[6]*e[12]-t[4]/t[3]*e[11];i[0]=n+s,i[1]=r+a,i[2]=o,i[3]=c}hessian_ptolemy(t,e,i,n,r){const o=-t[2]/t[4]*(n[1]-i[0]+Math.pow(e[1],2)/Math.pow(t[4],2))+-t[1]/t[5]*(n[2]-i[0]+Math.pow(e[2],2)/Math.pow(t[5],2))-t[7]/t[0]*(n[0]+i[0]-Math.pow(e[0],2)/Math.pow(t[0],2)),s=1/(t[7]*t[0])*e[6]*e[0]+-t[2]/t[4]*(i[1]-e[5]*e[1]/Math.pow(t[4],2))+1/(-t[1]*t[5])*e[4]*e[2],a=-1/(t[7]*t[0])*e[10]*e[0]+1/(-t[2]*t[4])*e[8]*e[1]+-t[1]/t[5]*(i[2]-e[9]*e[2]/Math.pow(t[5],2)),c=t[2]/t[4]*(n[5]+i[4]-Math.pow(e[5],2)/Math.pow(t[4],2))+t[5]/t[1]*(n[4]+i[4]-Math.pow(e[4],2)/Math.pow(t[1],2))- -t[0]/t[7]*(n[6]-i[4]+Math.pow(e[6],2)/Math.pow(t[7],2)),l=- -t[0]/t[7]*(i[5]-e[10]*e[6]/Math.pow(t[7],2))+1/(t[2]*t[4])*e[8]*e[5]+1/(t[5]*t[1])*e[9]*e[4],h=t[4]/t[2]*(n[8]+i[7]-Math.pow(e[8],2)/Math.pow(t[2],2))+t[1]/t[5]*(n[9]+i[7]-Math.pow(e[9],2)/Math.pow(t[5],2))-t[0]/t[7]*(n[10]+i[7]-Math.pow(e[10],2)/Math.pow(t[7],2)),d=t[8]/t[0]*(n[0]+i[0]-Math.pow(e[0],2)/Math.pow(t[0],2))+-t[1]/t[6]*(n[3]-i[0]+Math.pow(e[3],2)/Math.pow(t[6],2))- -t[3]/t[4]*(n[1]-i[0]+Math.pow(e[1],2)/Math.pow(t[4],2)),u=- -t[3]/t[4]*(i[1]-e[1]*e[5]/Math.pow(t[4],2))+1/(-t[8]*t[0])*e[7]*e[0]+1/(-t[1]*t[6])*e[4]*e[3],f=-1/(-t[3]*t[4])*e[11]*e[1]+1/(t[8]*t[0])*e[13]*e[0]+-t[1]/t[6]*(i[3]-e[3]*e[12]/Math.pow(t[6],2)),p=-t[0]/t[8]*(n[7]-i[4]+Math.pow(e[7],2)/Math.pow(t[8],2))+t[6]/t[1]*(n[4]+i[4]-Math.pow(e[4],2)/Math.pow(t[1],2))-t[3]/t[4]*(n[5]+i[4]-Math.pow(e[5],2)/Math.pow(t[4],2)),_=-1/(t[3]*t[4])*e[11]*e[5]+-t[0]/t[8]*(i[6]-e[7]*e[13]/Math.pow(t[8],2))+1/(t[6]*t[1])*e[12]*e[4],v=t[0]/t[8]*(n[13]+i[8]-Math.pow(e[13],2)/Math.pow(t[8],2))+t[1]/t[6]*(n[12]+i[8]-Math.pow(e[12],2)/Math.pow(t[6],2))-t[4]/t[3]*(n[11]+i[8]-Math.pow(e[11],2)/Math.pow(t[3],2));r[0]=o+d,r[1]=s+u,r[2]=a,r[3]=f,r[4]=s+u,r[5]=c+p,r[6]=l,r[7]=_,r[8]=a,r[9]=l,r[10]=h,r[11]=0,r[12]=f,r[13]=_,r[14]=0,r[15]=v}setvariables(t,e,i,n,r,o,s,a,c){e[0]=this.knot(t[0]),e[1]=this.knot(t[1]),e[2]=this.knot(t[2]),e[3]=this.knot(t[3]),e[4]=this.knot(t[4]),n[0]=pt(e[1],e[0]),n[1]=pt(e[2],e[0]),n[2]=pt(e[3],e[0]),n[3]=pt(e[4],e[0]),n[4]=pt(e[2],e[1]),n[5]=pt(e[3],e[1]),n[6]=pt(e[4],e[1]),n[7]=pt(e[3],e[2]),n[8]=pt(e[4],e[2]),i[0]=vt(n[0]),i[1]=vt(n[1]),i[2]=vt(n[2]),i[3]=vt(n[3]),i[4]=vt(n[4]),i[5]=vt(n[5]),i[6]=vt(n[6]),i[7]=vt(n[7]),i[8]=vt(n[8]);for(var l=0;l<9;l++)if(i[l]<this._calc.error_field)return!0;return r[0]=this.dknot(t[1]),r[1]=this.dknot(t[2]),r[2]=this.dknot(t[3]),r[3]=this.dknot(t[4]),o[0]=yt(n[0],r[0]),o[1]=yt(n[4],r[0]),o[2]=yt(n[5],r[0]),o[3]=yt(n[6],r[0]),o[4]=yt(n[1],r[1]),o[5]=yt(n[4],r[1]),o[6]=yt(n[7],r[1]),o[7]=yt(n[8],r[1]),o[8]=yt(n[2],r[2]),o[9]=yt(n[5],r[2]),o[10]=yt(n[7],r[2]),o[11]=yt(n[3],r[3]),o[12]=yt(n[6],r[3]),o[13]=yt(n[8],r[3]),a[0]=this.d2knot(t[1]),a[1]=this.d2knot(t[2]),a[2]=this.d2knot(t[3]),a[3]=this.d2knot(t[4]),c[0]=yt(n[0],a[0]),c[1]=yt(n[4],a[0]),c[2]=yt(n[5],a[0]),c[3]=yt(n[6],a[0]),c[4]=yt(n[1],a[1]),c[5]=yt(n[4],a[1]),c[6]=yt(n[7],a[1]),c[7]=yt(n[8],a[1]),c[8]=yt(n[2],a[2]),c[9]=yt(n[5],a[2]),c[10]=yt(n[7],a[2]),c[11]=yt(n[3],a[3]),c[12]=yt(n[6],a[3]),c[13]=yt(n[8],a[3]),s[0]=yt(r[0],r[0]),s[1]=yt(r[0],r[1]),s[2]=yt(r[0],r[2]),s[3]=yt(r[0],r[3]),s[4]=yt(r[1],r[1]),s[5]=yt(r[1],r[2]),s[6]=yt(r[1],r[3]),s[7]=yt(r[2],r[2]),s[8]=yt(r[3],r[3]),!1}knot(t){const e=2*t*ht;return u(c(),_(c(),_(c(),_(c(),_(c(),_(c(),p(c(),this._cosCoef[5],dt(6*e)),this._cosCoef[4],dt(5*e)),this._cosCoef[3],dt(4*e)),this._cosCoef[2],dt(3*e)),this._cosCoef[1],dt(2*e)),this._cosCoef[0],dt(e)),_(c(),_(c(),_(c(),_(c(),_(c(),p(c(),this._sinCoef[5],ut(6*e)),this._sinCoef[4],ut(5*e)),this._sinCoef[3],ut(4*e)),this._sinCoef[2],ut(3*e)),this._sinCoef[1],ut(2*e)),this._sinCoef[0],ut(e)))}dknot(t){const e=2*t*ht;return p(c(),u(c(),_(c(),_(c(),_(c(),_(c(),_(c(),p(c(),this._dcosCoef[5],dt(6*e)),this._dcosCoef[4],dt(5*e)),this._dcosCoef[3],dt(4*e)),this._dcosCoef[2],dt(3*e)),this._dcosCoef[1],dt(2*e)),this._dcosCoef[0],dt(e)),_(c(),_(c(),_(c(),_(c(),_(c(),p(c(),this._dsinCoef[5],ut(6*e)),this._dsinCoef[4],ut(5*e)),this._dsinCoef[3],ut(4*e)),this._dsinCoef[2],ut(3*e)),this._dsinCoef[1],ut(2*e)),this._dsinCoef[0],ut(e))),2*ht)}d2knot(t){const e=2*t*ht;return p(c(),u(c(),_(c(),_(c(),_(c(),_(c(),_(c(),p(c(),this._d2cosCoef[5],dt(6*e)),this._d2cosCoef[4],dt(5*e)),this._d2cosCoef[3],dt(4*e)),this._d2cosCoef[2],dt(3*e)),this._d2cosCoef[1],dt(2*e)),this._d2cosCoef[0],dt(e)),_(c(),_(c(),_(c(),_(c(),_(c(),p(c(),this._d2cosCoef[5],ut(6*e)),this._d2sinCoef[4],ut(5*e)),this._d2sinCoef[3],ut(4*e)),this._d2sinCoef[2],ut(3*e)),this._d2sinCoef[1],ut(2*e)),this._d2sinCoef[0],ut(e))),4*ht*ht)}c5_ptolemy(t){var e,i,n,r,o,s,a,c=[],l=new Array(5),h=new Array(9),d=new Array(9),u=new Array(4),f=new Array(14),p=new Array(9),_=new Array(4),v=new Array(14),g=[0,0,0,0,0],y=[0,0,0,0],m=[0,0,0,0],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0,w=[0,0,0,0,0];for(let T=0;T<t.length;T++)for(g[0]=t[T][0],g[1]=t[T][1],g[2]=t[T][2],g[3]=t[T][3],g[4]=t[T][4],b=0;b<250&&!this.setvariables(g,l,d,h,u,f,p,_,v);){if(e=d[0]*d[8]+d[1]*d[6]-d[3]*d[4]+d[2]*d[4]+d[5]*d[1]-d[0]*d[7],this.gradient_ptolemy(d,f,y),this.hessian_ptolemy(d,f,p,v,x),Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)+Math.pow(y[2],2)+Math.pow(y[3],2))<1e-7||e<=1e-6){if(e>1e-6)break;var[k,C,E]=this.toCVR(this.knot(g[0]),this.knot(g[1]),this.knot(g[2]));c.push([g,k,C,E].flat());break}m=this.modified_Cholesky(x,y),s=0,n=1/.75,r=Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2)+Math.pow(m[2],2)+Math.pow(m[3],2)),o=y[0]*m[0]+y[1]*m[1]+y[2]*m[2]+y[3]*m[3];do{for(n*=.75,s++,w[0]=g[0],i=0;i<4;i++)w[i+1]=g[i+1]-n*m[i];l[1]=this.knot(w[1]),l[2]=this.knot(w[2]),l[3]=this.knot(w[3]),l[4]=this.knot(w[4]),h[0]=pt(l[1],l[0]),h[1]=pt(l[2],l[0]),h[2]=pt(l[3],l[0]),h[3]=pt(l[4],l[0]),h[4]=pt(l[2],l[1]),h[5]=pt(l[3],l[1]),h[6]=pt(l[4],l[1]),h[7]=pt(l[3],l[2]),h[8]=pt(l[4],l[2]),d[0]=vt(h[0]),d[1]=vt(h[1]),d[2]=vt(h[2]),d[3]=vt(h[3]),d[4]=vt(h[4]),d[5]=vt(h[5]),d[6]=vt(h[6]),d[7]=vt(h[7]),d[8]=vt(h[8]),a=d[0]*d[8]+d[1]*d[6]-d[3]*d[4]+d[2]*d[4]+d[5]*d[1]-d[0]*d[7]}while(a>e-1e-4*n*o&&n*r>5e-6&&s<20);if(g=[w[0],w[1],w[2],w[3],w[4]],this.decim(g),this.proxim(g,2e-4))break;b++}return c}}function pt(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function _t(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]}function vt(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}function gt(t,e){return[t*e[0],t*e[1],t*e[2]]}function yt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}class mt{constructor(){this.videoControls=document.getElementById("video-controls"),this.playpause=document.getElementById("playpause"),this.progress=document.getElementById("progress"),this.progressBar=document.getElementById("progress-bar"),this.pressed=!1,this.speedDrop=new at("speed dropdown",1,"X %s"),this._animation={play:!1,frame:0,speed:1},this.videoControls.classList.toggle("hidden",!0)}initCallback(){this.playpause.addEventListener("click",(()=>{this.playBtnResponse()})),this.progress.addEventListener("mousedown",(t=>{0==t.button&&(this.pressed=!0,this.progressResponse(t))})),this.progress.addEventListener("mousemove",(t=>{this.progressResponse(t)})),window.addEventListener("mouseup",(()=>{this.pressed=!1}))}progressResponse(t){if(this.pressed){var e=t.offsetX/this.progress.offsetWidth;this.frame=Math.max(Math.min(Math.round(1199*e),1199),0)}}playBtnResponse(){this._animation.play=!this._animation.play,this._animation.play?this.playpause.setAttribute("data-state","play"):this.playpause.setAttribute("data-state","pause")}get frame(){return Math.floor(this._animation.frame)}set frame(t){(t<0||t>=lt)&&(t=0),this.progressBar.style.width=String(Math.floor(t/1199*100))+"%",this._animation.frame=t}get speed(){return this._animation.speed=this.speedDrop.value,this._animation.speed}get play(){return this._animation.play}set play(t){this._animation.play=t}Disable(t){!0===t?this.videoControls.classList.toggle("hidden",!0):(this.videoControls.classList.toggle("hidden",!1),this.reset())}reset(){this.frame=0,this._animation.speed=0,this.speedDrop.reset()}}class xt{constructor(){this._loader=new st,this._loader.initCallback(),this._linkedKnot=new V,this._fourierKnot=new rt,this._quintpules=new ft,this._quintpules.Initialize(),this._freeze=!1,this._knotMenu=new bt(this),this._knotMenu.initCallback()}get sceneType(){return this._knotMenu.sceneType}advanceScene(t){return e=this,i=void 0,r=function*(){if(this._freeze=!0,this.linkedKnot.selected=null,this.linkedKnot.drawingTool.Disable(!0),"Quintuples"===t){if(!this.fourierKnot.calculated||this.fourierKnot.intersecting)throw new Error("tried to find circles on incomplete knot");this._loader.load(!0);const t=this.fourierKnot.exportKIArr();this.quintuples.initKnot(t);const e=this.fourierKnot.exportKI();if(yield this.quintuples.findCircles(e,this._knotMenu.doubleCheck,this._knotMenu.doubleCheckLimit,this._knotMenu.maxCircles,this._loader),this._loader.load(!1),this._knotMenu.resetCircleOption(),!this._quintpules.calculated)return this._quintpules.deleteData(),this._knotMenu.sceneType="Fourier Knot",void(this._freeze=!1);this._knotMenu.sceneType="Quintuples"}else if("Fourier Knot"===t){if(!this.linkedKnot.isKnot)throw new Error("tried to smoothen incomplete knot");var e=this.linkedKnot.nodeArr;if(this.fourierKnot.calcFourier(e),!this.fourierKnot.calculated)return this._knotMenu.sceneType="Linked Knot",void(this._freeze=!1);this._knotMenu.sceneType="Fourier Knot"}this._freeze=!1},new((n=void 0)||(n=Promise))((function(t,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(s,a)}c((r=r.apply(e,i||[])).next())}));var e,i,n,r}drawScene(t,e,i=!0){var n,r;this._freeze||(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),"Linked Knot"==this.sceneType?this.linkedKnot.draw(t,e,i):"Fourier Knot"==this.sceneType?null===(n=this._fourierKnot)||void 0===n||n.draw(t,e,i):"Quintuples"==this.sceneType&&(null===(r=this._fourierKnot)||void 0===r||r.draw(t,e,i),this._quintpules.draw(t,e,i)))}get linkedKnot(){return this._linkedKnot}get fourierKnot(){return this._fourierKnot}get quintuples(){return this._quintpules}get transform_z(){return this.linkedKnot.transform_z}set transform_z(t){this.linkedKnot.transform_z=t}get selected(){return this.linkedKnot.selected}get InsertOrConnect(){return this.linkedKnot.drawingTool.connectLast||this.linkedKnot.drawingTool.insert}get EraseOrSubdiv(){return this.linkedKnot.drawingTool.erase||this.linkedKnot.drawingTool.subdivide}get selectedNode(){return this.linkedKnot.selectedNode}setSelected(t,i,n,r,o){t.useProgram(n),this.linkedKnot.setDrawState(!1),this.drawScene(t,n,!1);var s=Array.from(e.pixelsFromMouseClick(r,o,t));t.useProgram(i),this.linkedKnot.setDrawState(!0),this.drawScene(t,i,!0),this.linkedKnot.pickObj(s)}btnManager(){this._knotMenu.disableAdvance(),this._knotMenu.disableDelete()}}class bt{constructor(t){this._scene=t,this._sceneType="Linked Knot",this._advance=document.getElementById("advance scene"),this._delete=document.getElementById("delete scene"),this._doubleCheck={overlay:document.getElementById("delete-check"),confirm:document.getElementById("delete-confirm"),cancel:document.getElementById("delete-cancel")},this._slider={linkedKnot:document.getElementById("Linked Knot"),fourierKnot:document.getElementById("Fourier Knot"),quintuples:document.getElementById("Quintuples")},this._circleOptions={overlay:document.getElementById("circle options"),doubleCheck:document.getElementById("double check box"),doubleCheckLimit:new at("double check limit",20),maxCircles:new at("circle max dropdown",10),submit:document.getElementById("confirm calculate"),cancel:document.getElementById("cancel calculate")},this.cancelBtnResponse(),this.sceneSelect()}initCallback(){this._advance.addEventListener("click",(()=>{this.advanceBtnResponse()})),this._delete.addEventListener("click",(()=>{this.deleteBtnResponse()})),this._doubleCheck.confirm.addEventListener("click",(()=>{this.confirmBtnResponse()})),this._doubleCheck.cancel.addEventListener("click",(()=>{this.cancelBtnResponse()})),document.addEventListener("click",(t=>{"Linked Knot"!==this.sceneType||this._doubleCheck.overlay.contains(t.target)||this._doubleCheck.overlay.classList.contains("hidden")||this._doubleCheck.overlay.classList.toggle("hidden",!0)})),this._slider.linkedKnot.addEventListener("click",(()=>{this.sceneSelect()})),this._slider.fourierKnot.addEventListener("click",(()=>{this.sceneSelect()})),this._slider.quintuples.addEventListener("click",(()=>{this.sceneSelect()})),this._circleOptions.submit.addEventListener("click",(()=>{this._circleOptions.overlay.classList.toggle("hidden",!0),this._scene.advanceScene("Quintuples")})),this._circleOptions.cancel.addEventListener("click",(()=>{this.resetCircleOption()}))}advanceBtnResponse(){"Linked Knot"===this.sceneType?this._scene.advanceScene("Fourier Knot"):"Fourier Knot"===this.sceneType&&this._circleOptions.overlay.classList.toggle("hidden",!1)}resetCircleOption(){this._circleOptions.doubleCheckLimit.reset(),this._circleOptions.maxCircles.reset(),this._circleOptions.doubleCheck.checked=!0,this._circleOptions.overlay.classList.toggle("hidden",!0)}get doubleCheckLimit(){return this._circleOptions.doubleCheckLimit.value}get maxCircles(){return this._circleOptions.maxCircles.value}get doubleCheck(){return this._circleOptions.doubleCheck.checked}deleteBtnResponse(){"Linked Knot"===this.sceneType&&this._doubleCheck.overlay.classList.toggle("hidden",!1)}confirmBtnResponse(){"Linked Knot"===this.sceneType&&(this._scene.linkedKnot.deleteData(),this.disableDelete(),this.disableAdvance())}cancelBtnResponse(){this._doubleCheck.overlay.classList.toggle("hidden",!0)}disableDelete(){"Linked Knot"!=this.sceneType||this._scene.linkedKnot.isEmpty?this._delete.classList.toggle("hidden",!0):this._delete.classList.toggle("hidden",!1)}disableAdvance(){"Linked Knot"==this.sceneType?this._advance.disabled=!this._scene.linkedKnot.isKnot:"Fourier Knot"==this.sceneType&&(this._advance.disabled=this._scene.fourierKnot.intersecting)}sceneSelect(){this._slider.linkedKnot.checked?this.sceneType="Linked Knot":this._slider.fourierKnot.checked?this.sceneType="Fourier Knot":this._slider.quintuples.checked&&(this.sceneType="Quintuples")}disableSelector(){this._slider.fourierKnot.disabled=!this._scene.fourierKnot.calculated,this._slider.quintuples.disabled=!this._scene.quintuples.calculated}get sceneType(){return this._sceneType}set sceneType(t){this._sceneType=t,"Linked Knot"==this.sceneType?(this._slider.linkedKnot.checked=!0,this._scene.linkedKnot.drawingTool.Disable(!1),this._scene.quintuples.player.Disable(!0),this._advance.textContent="Smoothen Knot"):"Fourier Knot"==this.sceneType?(this._slider.fourierKnot.checked=!0,this._scene.linkedKnot.selected=null,this._scene.linkedKnot.drawingTool.Disable(!0),this._scene.quintuples.player.Disable(!0),this._advance.textContent="Find Circles"):"Quintuples"==this.sceneType&&(this._slider.quintuples.checked=!0,this._scene.linkedKnot.selected=null,this._scene.linkedKnot.drawingTool.Disable(!0),this._scene.quintuples.player.Disable(!1)),this._advance.setAttribute("sceneType",this._sceneType),this.disableAdvance(),this.disableDelete(),this.disableSelector(),this.resetCircleOption(),this._circleOptions.overlay.classList.toggle("hidden",!0)}}var wt=i(755),kt=i.n(wt);class Ct{constructor(e){this.canvas=e,this.gl=t.checkWebGL(this.canvas),this.programs={render:t.createProgram(this.gl,"precision mediump float;\r\nattribute vec4 aColor;\r\nattribute vec4 aNormal;\r\nattribute vec4 aPosition;\r\n\r\nuniform mat4 mWorld;\r\nuniform mat4 mView;\r\nuniform mat4 mProj;\r\n\r\n\r\nuniform mat3 uNormalMatrix;\r\n\r\nvarying vec4 vColor;\r\nvarying vec3 vNormal;\r\n\r\nvoid main() {\r\n    gl_Position = mProj * mView * mWorld * aPosition;\r\n\r\n    vColor = aColor;\r\n    vNormal = normalize(uNormalMatrix * vec3(aNormal));\r\n}","precision mediump float;\r\n\r\nuniform vec3 uDiffuseLight;\r\nuniform vec3 uLightPosition;\r\nuniform vec3 uAmbientLight;\r\n\r\nvarying vec4 vColor;\r\nvarying vec3 vNormal;\r\n\r\n\r\nvoid main() {\r\n    // Normalize the normal because it is interpolated and not 1.0 in length any more\r\n    vec3 normal = normalize(vNormal);\r\n\r\n    // Calculate the light direction and make its length 1.\r\n    vec3 lightDirection = normalize(uLightPosition);\r\n\r\n    // The dot product of the light direction and the orientation of a surface (the normal)\r\n    float nDotL = max(dot(lightDirection, normal), 0.0);\r\n\r\n    // Calculate the final color from diffuse reflection and ambient reflection\r\n    vec3 diffuse = uDiffuseLight * vColor.rgb * nDotL;\r\n    vec3 ambient = uAmbientLight * vColor.rgb;\r\n    gl_FragColor = vec4(diffuse + ambient, vColor.a);\r\n}"),read:t.createProgram(this.gl,"attribute vec4 aPosition;\r\nattribute vec4 aColor;\r\n\r\nuniform mat4 mWorld;\r\nuniform mat4 mView;\r\nuniform mat4 mProj;\r\n\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() {\r\n    gl_Position = mProj * mView * mWorld * aPosition;\r\n    vColor = aColor;\r\n}","precision mediump float;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() {\r\n    gl_FragColor = vColor;\r\n}")},this.camera=new D,this.scene=new xt,this.ui={left_down:!1,wheel_down:!1,mouse:{lastX:0,lastY:0},doubleClick:{click:!1,sameObj:!1,lastX:0,lastY:0},shift:!1},this._fps={fpsLimit:30,prev:0},this._infoPage={hidden:!0,overlay:document.getElementById("about overlay"),btn:document.getElementById("about button"),exit:document.getElementById("info-exit")}}run(){this.initGL(),this.initCallbacks(),requestAnimationFrame(this.animate.bind(this))}initGL(){this.gl.clearColor(.9855,.9867,.9812,1),this.gl.enable(this.gl.DEPTH_TEST),this.gl.useProgram(this.programs.render),P.setLight(this.gl,this.programs.render,[50,50,50]),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.blendEquation(this.gl.FUNC_ADD)}initCallbacks(){var t;this._infoPage.btn.addEventListener("click",(()=>{this._infoPage.overlay.classList.toggle("hidden",!1),this._infoPage.hidden=!1})),this._infoPage.exit.addEventListener("click",(()=>{this._infoPage.overlay.classList.toggle("hidden",!0),this._infoPage.hidden=!0})),document.addEventListener("click",(t=>{var e;(null===(e=this._infoPage.overlay.querySelector("#info-content"))||void 0===e?void 0:e.contains(t.target))||this._infoPage.hidden||(this._infoPage.overlay.classList.toggle("hidden",!0),this._infoPage.hidden=!0)})),document.addEventListener("keydown",(t=>{this.keyDown(t)})),document.addEventListener("keyup",(t=>{this.keyUp(t)})),this.canvas.addEventListener("mousedown",(t=>{this.mouseDown(t)})),this.canvas.addEventListener("mouseup",(t=>{this.mouseUp(t)})),this.canvas.addEventListener("mousemove",(t=>{this.mouseMove(t)})),this.canvas.addEventListener("wheel",(t=>{this.zoom(t)})),null===(t=document.getElementById("camera button"))||void 0===t||t.addEventListener("click",(()=>{this.camera.reset=!0})),window.addEventListener("resize",(()=>{this.resizer()})),this.resizer()}configCamera(){this.gl.useProgram(this.programs.read),this.camera.update(this.gl,this.programs.read,this.canvas.width,this.canvas.height),this.gl.useProgram(this.programs.render),this.camera.update(this.gl,this.programs.render,this.canvas.width,this.canvas.height),this.camera.setRay()}animate(t){requestAnimationFrame(this.animate.bind(this)),this.camera.reset&&this.camera.resetCam(this.gl,this.programs.render,this.canvas.width,this.canvas.height),t-this._fps.prev<1e3/this._fps.fpsLimit-.1||this.scene.drawScene(this.gl,this.programs.render,!0)}keyDown(t){this.ui.shift=t.shiftKey,("Delete"===t.key||"Backspace"===t.key)&&this.scene.linkedKnot.delete(),("="==t.key&&1==t.ctrlKey||"-"==t.key&&1==t.ctrlKey)&&t.preventDefault(),kt()(window).on("mousewheel DOMMouseScroll",(function(t){1==t.ctrlKey&&t.preventDefault()}))}keyUp(t){this.ui.shift=t.shiftKey}mouseDown(t){if(this.camera.reset&&(this.camera.reset=!1,this.configCamera()),e.inCanvas(t)){if(this.ui.doubleClick.click=!0,this.ui.doubleClick.lastX=t.clientX,this.ui.doubleClick.lastY=t.clientY,0==t.button&&(this.ui.left_down=!0,"Linked Knot"==this.scene.sceneType&&!this.scene.InsertOrConnect)){const e=this.scene.selected;this.scene.setSelected(this.gl,this.programs.render,this.programs.read,t,this.canvas),e===this.scene.selected&&(this.scene.selectedNode||this.ui.shift)&&(this.ui.doubleClick.sameObj=!0)}1==t.button&&(this.ui.wheel_down=!0)}}mouseUp(t){0==t.button&&(this.ui.left_down=!1,this.ui.doubleClick.click&&(this.scene.InsertOrConnect||this.scene.EraseOrSubdiv?this.scene.linkedKnot.btnManager():this.ui.doubleClick.sameObj&&(this.scene.transform_z=!this.scene.transform_z)),this.scene.btnManager()),1==t.button&&(this.ui.wheel_down=!1),this.ui.doubleClick.sameObj=!1,this.configCamera()}checkClick(t,e){const i=Math.abs(t-this.ui.doubleClick.lastX),n=Math.abs(e-this.ui.doubleClick.lastY);return i<15&&n<15}mouseMove(t){const i=t.clientX,n=t.clientY;if(this.scene.selectedNode||!this.ui.left_down&&!this.ui.wheel_down){if("Linked Knot"==this.scene.sceneType&&(this.scene.InsertOrConnect||this.scene.EraseOrSubdiv)&&(this.ui.left_down||this.ui.wheel_down)){if(this.ui.doubleClick.click)return void(this.ui.doubleClick.click=this.checkClick(i,n));const t=1/this.canvas.height,e=t*(i-this.ui.mouse.lastX),r=t*(n-this.ui.mouse.lastY);this.ui.left_down&&!this.ui.shift?(this.camera.addAngle(e,r),this.camera.update(this.gl,this.programs.render,this.canvas.width,this.canvas.height)):(this.ui.wheel_down||this.ui.shift&&this.ui.left_down)&&(this.camera.transform(e,r,this.scene.transform_z),this.camera.update(this.gl,this.programs.render,this.canvas.width,this.canvas.height))}else if("Linked Knot"==this.scene.sceneType&&this.scene.selectedNode&&(this.ui.left_down||this.scene.InsertOrConnect)){if(this.ui.doubleClick.click)return void(this.ui.doubleClick.click=this.checkClick(i,n));const{relx:h,rely:d}=e.pixelInputToGLCoord(t,this.canvas);var r=a(o(),[h,d,-1,1],this.camera.toWorld),l=a(o(),[h,d,1,1],this.camera.toWorld);s(r,r,1/r[3]),s(l,l,1/l[3]);const u=f(c(),[l[0],l[1],l[2]],[r[0],r[1],r[2]]);this.scene.linkedKnot.moveNode(u,this.camera.absPos,this.camera.normal)}}else{this.ui.doubleClick.click=!1;const t=1/this.canvas.height,e=t*(i-this.ui.mouse.lastX),r=t*(n-this.ui.mouse.lastY);this.ui.left_down&&!this.ui.shift?(this.camera.addAngle(e,r),this.camera.update(this.gl,this.programs.render,this.canvas.width,this.canvas.height)):(this.ui.wheel_down||this.ui.shift&&this.ui.left_down)&&(this.camera.transform(e,r,this.scene.transform_z),this.camera.update(this.gl,this.programs.render,this.canvas.width,this.canvas.height))}this.ui.mouse.lastX=i,this.ui.mouse.lastY=n}zoom(t){this.camera.addRadius(t.deltaY),this.configCamera()}resizer(){this.resizeCanvasToDisplaySize(),this.configCamera()}resizeCanvasToDisplaySize(){const t=window.devicePixelRatio,{width:e,height:i}=this.canvas.getBoundingClientRect(),n=Math.round(e*t),r=Math.round(i*t);this.canvas.width=n,this.canvas.height=r}}const Et=document.getElementById("gfx-main"),Tt=document.getElementById("error-screen");let Mt=!1;var At,St;if(At=navigator.userAgent,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(At)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(At.substr(0,4)))&&(Mt=!0),Mt)throw Tt.textContent="Mobile and Tablets not supported.",Tt.classList.remove("hidden"),new Error("Use chrome on PC");try{St=new Ct(Et)}catch(t){throw console.log(t),Tt.textContent="Try a new version of Chrome.",Tt.classList.remove("hidden"),new Error}St.run()})(),(()=>{"use strict";var t=i(91),e=i.n(t),n=new URL(i(551),i.b),r=new URL(i(951),i.b),o=new URL(i(337),i.b),s=new URL(i(517),i.b),a=new URL(i(994),i.b),c=new URL(i(873),i.b),l=new URL(i(856),i.b),h=new URL(i(282),i.b),d=new URL(i(794),i.b),u=new URL(i(302),i.b);e()(n),e()(r),e()(o),e()(s),e()(a),e()(c),e()(l),e()(h),e()(d),e()(u)})()})();